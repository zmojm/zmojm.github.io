(this["webpackJsonpzz-tag"]=this["webpackJsonpzz-tag"]||[]).push([[0],{123:function(e,t,n){},158:function(e,t,n){},163:function(e,t,n){},282:function(e,t,n){},283:function(e,t,n){},284:function(e,t,n){},288:function(e,t,n){},289:function(e,t,n){},290:function(e,t,n){},295:function(e,t){},296:function(e,t){},297:function(e,t){},298:function(e,t,n){},299:function(e,t,n){},300:function(e,t,n){},301:function(e,t,n){},302:function(e,t,n){},303:function(e,t,n){},304:function(e,t,n){},305:function(e,t,n){},306:function(e,t,n){},307:function(e,t,n){},308:function(e,t,n){},309:function(e,t,n){"use strict";n.r(t);var c,a,i,r,o,s,l,u,d,j,f,b,h,O,v,p,m,x,g=n(0),y=n(37),k=n.n(y),w=n(8),C=n(25),N=n(190),S=n(34),I=n.n(S),E=n(57),A=n(30),L=n(4),M=n.n(L),F=["title","titleId"];function q(){return(q=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var c in n)Object.prototype.hasOwnProperty.call(n,c)&&(e[c]=n[c])}return e}).apply(this,arguments)}function z(e,t){if(null==e)return{};var n,c,a=function(e,t){if(null==e)return{};var n,c,a={},i=Object.keys(e);for(c=0;c<i.length;c++)n=i[c],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(c=0;c<i.length;c++)n=i[c],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function T(e,t){var n=e.title,y=e.titleId,k=z(e,F);return g.createElement("svg",q({t:1624887109928,className:"icon",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg","p-id":3819,width:32,height:32,ref:t,"aria-labelledby":y},k),n?g.createElement("title",{id:y},n):null,c||(c=g.createElement("path",{d:"M187.2 341.7L77.9 232.4c-45.8-45.8-45.8-120.8 0-166.6s120.8-45.8 166.6 0l109.3 109.3c45.8 45.8 45.8 120.8 0 166.6s-120.8 45.8-166.6 0zM838.8 341.7l109.3-109.3c45.8-45.8 45.8-120.8 0-166.6s-120.7-45.8-166.6 0L672.2 175.2c-45.8 45.8-45.8 120.8 0 166.6 45.8 45.7 120.8 45.7 166.6-0.1z",fill:"","p-id":3820})),a||(a=g.createElement("path",{d:"M743.9 905.4l-140.7 15.9c-59.9 6.8-120.4 6.8-180.3 0l-140.7-15.9c-151.6 0-268.3-159.9-247.5-310.1l15.9-115c29.4-213.9 212.2-373.2 428-373.2h68.7c215.9 0 398.6 159.3 428.2 373.1l15.9 115c20.8 150.3-95.9 310.2-247.5 310.2z",fill:"#FCFCFC","p-id":3821})),i||(i=g.createElement("path",{d:"M513 936.3c-30.5 0-61-1.7-91.3-5.1l-140.2-15.8c-35.3-0.1-69.7-8.4-102.3-24.6-30.8-15.4-58.6-37.2-82.6-64.7-56.2-64.6-83.2-151.3-72-232.1l15.9-115c14.7-106 67.1-202.9 147.6-273 80.5-70.2 183.7-108.8 290.5-108.8h68.7c106.8 0 210 38.6 290.5 108.8a442.92 442.92 0 0 1 147.6 272.9l15.9 115c11.2 80.8-15.8 167.5-72 232.1-24 27.6-51.8 49.4-82.6 64.7-32.6 16.3-67 24.6-102.3 24.6l-140.2 15.8c-30.2 3.5-60.7 5.2-91.2 5.2z m-34.4-819.2c-102 0-200.5 36.9-277.4 103.9-76.8 67-126.9 159.6-140.8 260.6l-15.9 115c-10.4 75.1 14.8 156 67.3 216.2 46.4 53.2 106.9 82.5 170.4 82.5h0.6l0.6 0.1 140.7 15.9c59.1 6.7 119 6.7 178.1 0l141.3-15.9h0.6c63.5 0 124-29.3 170.4-82.5 52.5-60.3 77.7-141.1 67.3-216.2l-15.9-115c-14-101-64-193.6-140.9-260.6-76.9-67-175.4-103.9-277.4-103.9h-69z",fill:"#020202","p-id":3822})),r||(r=g.createElement("path",{d:"M433.4 495.1c19.4 75.4-54.2 166.4-129.6 185.8S179.7 669 160.3 593.6s26-222.8 101.4-242.2S414 419.7 433.4 495.1z",fill:"","p-id":3823})),o||(o=g.createElement("path",{d:"M298.6 513.9m-79.3 0a79.3 79.3 0 1 0 158.6 0 79.3 79.3 0 1 0-158.6 0Z",fill:"#FFFFFF","p-id":3824})),s||(s=g.createElement("path",{d:"M298.6 513.9m-50.9 0a50.9 50.9 0 1 0 101.8 0 50.9 50.9 0 1 0-101.8 0Z",fill:"","p-id":3825})),l||(l=g.createElement("path",{d:"M315.2 500.6m-20.3 0a20.3 20.3 0 1 0 40.6 0 20.3 20.3 0 1 0-40.6 0Z",fill:"#FFFFFF","p-id":3826})),u||(u=g.createElement("path",{d:"M592.6 495.1c-19.4 75.4 54.2 166.4 129.6 185.8s124.1-11.9 143.5-87.3c19.4-75.4-26-222.8-101.4-242.2S612 419.7 592.6 495.1z",fill:"","p-id":3827})),d||(d=g.createElement("path",{d:"M727.4 513.9m-79.3 0a79.3 79.3 0 1 0 158.6 0 79.3 79.3 0 1 0-158.6 0Z",fill:"#FFFFFF","p-id":3828})),j||(j=g.createElement("path",{d:"M727.4 513.9m-50.9 0a50.9 50.9 0 1 0 101.8 0 50.9 50.9 0 1 0-101.8 0Z",fill:"","p-id":3829})),f||(f=g.createElement("path",{d:"M710.8 500.6m-20.3 0a20.3 20.3 0 1 0 40.6 0 20.3 20.3 0 1 0-40.6 0Z",fill:"#FFFFFF","p-id":3830})),b||(b=g.createElement("path",{d:"M466.3 695.3a46.7 34.5 0 1 0 93.4 0 46.7 34.5 0 1 0-93.4 0Z",fill:"","p-id":3831})),h||(h=g.createElement("path",{d:"M485.9 823.1c0 9.5-12.1 17.1-27.1 17.1-15 0-27.1-7.7-27.1-17.1",fill:"#FCFCFC","p-id":3832})),O||(O=g.createElement("path",{d:"M458.8 850.3c-20.8 0-37.1-11.9-37.1-27.1 0-5.5 4.5-10 10-10s10 4.5 10 10c0 2.2 6.5 7.1 17.1 7.1 10.6 0 17.1-5 17.1-7.1 0-5.5 4.5-10 10-10s10 4.5 10 10c0 15.1-16.3 27.1-37.1 27.1z",fill:"","p-id":3833})),v||(v=g.createElement("path",{d:"M594.3 823.1c0 9.5-12.1 17.1-27.1 17.1-15 0-27.1-7.7-27.1-17.1",fill:"#FCFCFC","p-id":3834})),p||(p=g.createElement("path",{d:"M567.2 850.3c-20.8 0-37.1-11.9-37.1-27.1 0-5.5 4.5-10 10-10s10 4.5 10 10c0 2.2 6.5 7.1 17.1 7.1s17.1-5 17.1-7.1c0-5.5 4.5-10 10-10s10 4.5 10 10c0 15.1-16.3 27.1-37.1 27.1z",fill:"","p-id":3835})),m||(m=g.createElement("path",{d:"M485.9 823.1c0-9.5 12.1-17.1 27.1-17.1 15 0 27.1 7.7 27.1 17.1",fill:"#FCFCFC","p-id":3836})),x||(x=g.createElement("path",{d:"M550.1 823.1h-20c0-2.2-6.5-7.1-17.1-7.1-10.6 0-17.1 5-17.1 7.1h-20c0-15.2 16.3-27.1 37.1-27.1s37.1 11.9 37.1 27.1z",fill:"","p-id":3837})))}var D=g.forwardRef(T),B=(n.p,n(198)),V=n(42),J=(n(158),n(117)),_=n(319),R=n(317),H=n(311),Q=n(312),Z=n(192),W=n(91),U=n(326),P=n(327),G=n(32),K=n(19),Y=n(89),X={blue:"#0d6efd",indigo:"#6610f2",purple:"#6f42c1",pink:"#d63384",red:"#dc3545",orange:"#fd7e14",yellow:"#ffc107",green:"#198754",teal:"#20c997",cyan:"#0dcaf0"},$=[{key:"blue",label:"\u84dd\u8272",value:"#0d6efd"},{key:"indigo",label:"\u975b\u84dd\u8272",value:"#6610f2"},{key:"purple",label:"\u7d2b\u8272",value:"#6f42c1"},{key:"pink",label:"\u7c89\u8272",value:"#d63384"},{key:"red",label:"\u7ea2\u8272",value:"#dc3545"},{key:"orange",label:"\u6a59\u8272",value:"#fd7e14"},{key:"yellow",label:"\u9ec4\u8272",value:"#ffc107"},{key:"green",label:"\u7eff\u8272",value:"#198754"},{key:"teal",label:"\u84dd\u7eff\u8272",value:"#20c997"},{key:"cyan",label:"\u9752\u8272",value:"#0dcaf0"}],ee=function(e){var t=document.querySelectorAll('span[data-highlight-id="'.concat(e,'"]'));return t.length<=0&&(t=document.querySelectorAll('span[data-highlight-id-extra="'.concat(e,'"]'))),t},te=function(e,t){e.classList.contains(t)||e.classList.add(t)},ne=function(e,t){for(var n=t.text,c=t.color,a=0;a<e.length;a++){var i=e[a];te(i,"color-".concat(c));var r=i.dataset.highlightIdExtra||i.dataset.highlightId,o=ee(r);i===o[0]?i.dataset.text&&"null"!==i.dataset.text||(i.dataset.text=n):(i.dataset.text="null","tail"===i.dataset.highlightSplitType&&"null"===o[0].dataset.text&&(o[0].dataset.text=n))}},ce=Object(Y.b)({name:"header",initialState:{categoryList:[]},reducers:{createCategory:function(e,t){var n=e.categoryList.length,c=n<$.length?n:$.length-1;console.log("presetColor[index].key",$[c],$[c].key);var a={id:Object(Y.c)(),text:"",color:$[c].key,type:"accept"};e.categoryList.push(a)},changeCategory:function(e,t){var n=t.payload,c=n.id,a=n.name,i=n.value;console.log("action.payload",t.payload),e.categoryList=e.categoryList.map((function(e){return c===e.id?Object(K.a)(Object(K.a)({},e),{},Object(A.a)({},a,i)):e}))},deleteCategory:function(e,t){var n=t.payload;e.categoryList=e.categoryList.filter((function(e){return e.id!==n}))},updateCategory:function(e,t){e.categoryList=t.payload}}}),ae=ce.actions,ie=ae.createCategory,re=ae.changeCategory,oe=ae.updateCategory,se=ae.deleteCategory,le=ce.reducer,ue=n(61),de=n(64),je=n(154),fe=n.n(je);fe.a.init({appId:"zhG78X78KsJ4MuyLquDrtexj-gzGzoHsz",appKey:"QhcOlKH32P32CCaEUbzJJWbo",serverURL:"https://zhg78x78.lc-cn-n1-shared.com"});var be=fe.a,he=function(e){var t=new be.Query("Configs");return e?t.get(e):t.find()},Oe=n(2),ve=J.a.Option,pe="610291721de21d3e072c5432",me=function(e){var t=e.visible,n=e.onOk,c=e.onCancel,a=Object(g.useState)(!1),i=Object(w.a)(a,2),r=i[0],o=i[1],s=Object(G.b)(),l=Object(G.c)((function(e){return e.header.categoryList}));Object(G.c)((function(e){return e.header}));Object(g.useEffect)((function(){he(pe).then((function(e){var t=e.get("categoryList");s(oe(t))}))}),[]);var u=function(e){var t=e.id,n=e.value,c=e.name;s(re({id:t,value:n,name:c}))};return Object(Oe.jsx)(_.a,{title:"\u7f16\u8f91\u914d\u7f6e",okText:"\u786e\u5b9a",cancelText:"\u53d6\u6d88",confirmLoading:r,visible:t,onOk:function(){o(!0),function(e,t){var n=be.Object.createWithoutData("Configs",e);return Object.keys(t).forEach((function(e){n.set(e,t[e])})),n.save()}(pe,{categoryList:l}).then((function(e){o(!1),B.b.success("\u4e0a\u4f20\u6210\u529f"),window.location.reload(),n&&n()})).catch((function(){o(!1),B.b.error("\u4e0a\u4f20\u5931\u8d25")}))},width:800,onCancel:function(){c&&c()},children:Object(Oe.jsxs)(R.a,{layout:"inline",children:[l.map((function(e,t){var n=e.id,c=e.text,a=e.color,i=e.type;return Object(Oe.jsxs)(H.a,{style:{marginBottom:30},children:[Object(Oe.jsx)(Q.a,{children:Object(Oe.jsxs)(R.a.Item,{label:"\u6807\u6ce8\u989c\u8272",children:[Object(Oe.jsx)(J.a,{value:a,style:{width:120},onChange:function(e){return u({id:n,value:e,name:"color"})},children:$.map((function(e,t){var n=e.key,c=e.label;return Object(Oe.jsx)(ve,{value:n,children:c},t)}))}),Object(Oe.jsx)("div",{style:{marginTop:5,borderRadius:3,height:20,backgroundColor:X[a]}})]})}),Object(Oe.jsx)(Q.a,{children:Object(Oe.jsx)(R.a.Item,{label:"\u6807\u6ce8\u6587\u6848",children:Object(Oe.jsx)(Z.a,{value:c,onChange:function(e){return u({id:n,value:e.target.value,name:"text"})},placeholder:"\u8bf7\u8f93\u5165\u6807\u6ce8\u7684\u6587\u6848"})})}),Object(Oe.jsx)(Q.a,{children:Object(Oe.jsx)(R.a.Item,{label:"\u6279\u6ce8\u7c7b\u578b",children:Object(Oe.jsxs)(J.a,{value:i,style:{width:120},onChange:function(e){return u({id:n,value:e,name:"type"})},children:[Object(Oe.jsx)(ve,{value:"accept",children:"\u6b63\u786e\u7c7b\u578b"}),Object(Oe.jsx)(ve,{value:"wrong",children:"\u9519\u8bef\u7c7b\u578b"})]})})}),Object(Oe.jsx)("div",{style:{display:"flex",alignItems:"center"},className:"delete",children:Object(Oe.jsx)(U.a,{onClick:function(){return function(e){_.a.confirm({title:"\u5220\u9664",icon:Object(Oe.jsx)(W.a,{}),content:"\u5220\u9664\u8be5\u6807\u6ce8\u540e\uff0c\u66fe\u7ecf\u4f7f\u7528\u8fc7\u8be5\u6807\u6ce8\u7684\u6570\u636e\u65e0\u6cd5\u6b63\u786e\u663e\u793a",okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88",onCancel:function(){console.log("\u53d6\u6d88")},onOk:function(){s(se(e)),console.log("\u5220\u9664",e)}})}(e.id)}})})]},n)})),Object(Oe.jsx)(V.a,{type:"dashed",onClick:function(){s(ie())},style:{marginTop:30},icon:Object(Oe.jsx)(P.a,{}),children:"\u6dfb\u52a0\u6807\u6ce8"})]})})},xe=function(e){var t=new be.Query("Article");return t.descending("createdAt"),e?t.get(e):(t.limit(500),t.find())},ge=function(e,t){var n=be.Object.createWithoutData("Article",e);return Object.keys(t).forEach((function(e){n.set(e,t[e])})),n.save()},ye=n(314),ke=(J.a.Option,function(e){var t=e.visible,n=(e.onOk,e.onCancel),c=Object(g.useState)(!1),a=Object(w.a)(c,2),i=a[0],r=(a[1],Object(G.b)(),Object(g.useState)([])),o=Object(w.a)(r,2),s=o[0],l=o[1],u=(Object(G.c)((function(e){return e.annotation.config})),Object(G.c)((function(e){return e.annotation.annotationList}))),d=Object(G.c)((function(e){return e.header.categoryList})),j=[{title:"No.",dataIndex:"No",key:"No"},{title:"Name",dataIndex:"name",key:"name"},{title:"Count",dataIndex:"count",key:"count"},{title:"Text",dataIndex:"text",key:"text",render:function(e){return Object(Oe.jsx)("div",{children:e.map((function(e,t){return Object(Oe.jsxs)("div",{children:[t+1,". ",e]},t)}))})}}];return Object(g.useEffect)((function(){if(t&&u&&u.length>0){var e={},n=0;u.forEach((function(t,c){var a=t.categoryId,i=t.text;if(e[a])e[a].count=e[a].count+1,e[a].text.push(i);else{var r=d.find((function(e){return e.id===a})).text;e[a]={key:n,No:n++,name:r,text:[i],count:1}}}));var c=Object.keys(e).map((function(t){return e[t]}));l(c)}}),[u,t,d]),Object(Oe.jsx)(_.a,{title:"\u7edf\u8ba1\u5206\u6790",okText:"\u786e\u5b9a",cancelText:"\u53d6\u6d88",confirmLoading:i,visible:t,onOk:function(){n&&n()},width:800,onCancel:function(){console.log("\uff1f\uff1f\uff1f\u8c03\u7528\u4e00\u4e0b\u554a"),n&&n()},children:Object(Oe.jsx)(ye.a,{dataSource:s,columns:j})})}),we=Object(Y.b)({name:"annotation",initialState:{annotationList:[],config:{},isSave:!1},reducers:{initAnnotation:function(e,t){var n=t.payload,c=n.annotation,a=n.score,i=n.nationality,r=n.source;e.annotationList=c||[],e.config={score:a,nationality:i,source:r}},createAnnotation:function(e,t){var n=t.payload;e.annotationList.some((function(e){return e.id===n.id}))||e.annotationList.push(n)},deleteAnnotation:function(e,t){var n=t.payload;e.annotationList=e.annotationList.filter((function(e){return e.id!==n}))},updateSavaStatus:function(e,t){var n=t.payload;e.isSave=n}}}),Ce=we.actions,Ne=Ce.initAnnotation,Se=Ce.createAnnotation,Ie=Ce.deleteAnnotation,Ee=Ce.updateSavaStatus,Ae=we.reducer,Le=function(e){var t,n=e.className,c=e.type,a=void 0===c?"edit":c,i=Object(C.g)(),r=Object(C.h)(),o=Object(G.b)(),s=Object(g.useState)(!1),l=Object(w.a)(s,2),u=l[0],d=l[1],j=Object(g.useState)(!1),f=Object(w.a)(j,2),b=f[0],h=f[1],O=Object(g.useState)(!1),v=Object(w.a)(O,2),p=v[0],m=v[1],x=Object(G.c)((function(e){return e.annotation.annotationList})),y=M()((t={},Object(A.a)(t,"zz-header",!0),Object(A.a)(t,n,n),t)),k=Object(g.useCallback)(Object(E.a)(I.a.mark((function e(){var t;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=r.objectId,console.log("annotationList",x,t),d(!0),ge(t,{annotation:x,annotationCount:x.length||0}).then((function(e){B.b.success("\u4fdd\u5b58\u6210\u529f\uff01"),o(Ee(!1)),d(!1)})).catch((function(e){B.b.success("\u4fdd\u5b58\u5931\u8d25\uff0c\u8bf7\u68c0\u67e5\u7f51\u7edc\u8bbe\u7f6e\uff01"),d(!1)}));case 4:case"end":return e.stop()}}),e)}))),[x]);Object(g.useEffect)((function(){var e=function(e){83==e.keyCode&&window.event.ctrlKey&&(window.event.preventDefault(),k())};return window.addEventListener("keydown",e),function(){window.removeEventListener("keydown",e)}}),[k]);return Object(Oe.jsxs)("div",{className:y,children:[Object(Oe.jsxs)("div",{className:"left",children:[Object(Oe.jsx)("div",{className:"logo",onClick:function(){i.push({pathname:"/admin"})},children:Object(Oe.jsx)(D,{})}),Object(Oe.jsx)("div",{className:"title",children:"\u8bed\u6599\u6807\u6ce8\u4e0e\u7edf\u8ba1\u7cfb\u7edf"})]}),"edit"===a&&Object(Oe.jsxs)("div",{className:"right",children:[Object(Oe.jsx)(V.a,{loading:u,type:"outline-secondary",onClick:k,children:"\u4fdd\u5b58\u8bb0\u5f55"}),Object(Oe.jsx)(V.a,{style:{marginLeft:30},onClick:function(){return h(!0)},type:"outline-secondary",children:"\u7f16\u8f91\u914d\u7f6e"}),Object(Oe.jsx)(V.a,{style:{marginLeft:30},type:"outline-secondary",onClick:function(){return m(!0)},children:"\u7edf\u8ba1\u5206\u6790"})]}),Object(Oe.jsx)(me,{visible:b,onOk:k,onCancel:function(){h(!1)}}),Object(Oe.jsx)(ke,{visible:p,onCancel:function(){return m(!1)}})]})},Me=n(93),Fe=n.n(Me),qe=(n(282),console.log.bind(console,"[annota]"),"123456789ABCDEFGHIJKLMNOPQRSTVWXYZ"),ze=function(e){var t,n=Object(C.h)(),c=e.className,a=e.highlighter,i=Object(g.useRef)(null),r=Object(G.b)(),o=Object(g.useState)(""),s=Object(w.a)(o,2),l=s[0],u=s[1],d=Object(g.useState)([]),j=Object(w.a)(d,2),f=j[0],b=j[1],h=Object(g.useState)({}),O=Object(w.a)(h,2),v=O[0],p=O[1],m=Object(G.c)((function(e){return e.header.categoryList})),x=Object(G.c)((function(e){return e.annotation.annotationList})),y=Object(G.c)((function(e){return e.annotation.isSave})),k=M()((t={},Object(A.a)(t,"zz-annotation",!0),Object(A.a)(t,c,c),t));Object(g.useEffect)((function(){var e=n.objectId;xe(e).then((function(e){var t=e.toJSON(),n=t.annotation,c="";c="SYSU"===t.source?function(e){var t=document.createElement("div");return t.innerHTML=e,t.textContent.replace(/\n/g,"").replace(/&/g,"").replace(/@/g,"").replace(/<.>/g,"").replace(/CZ|BZ|SBZ|BGFZ/g,"").replace(/<>/g,"").replace(/(\u3010(.*?)\u3011)/g,(function(e){return e[1]})).replaceAll("\u3002","\u3002</p><p>")}(t.article):t.article.replace(/\[.*?\]/g,"").replace(/\{CP(.*?)P\}/g,"$1").replace(/\{CQ(.*?)\}/g,"$1").replace(/\{.*?\}/g,"").replaceAll("\u3002","\u3002</p><p>").replaceAll("\n","").replaceAll(" ",""),u(c),r(Ne(t)),n&&n.forEach((function(e){a.fromStore(e.start,e.end,e.text,e.id)}))}))}),[n,a]),Object(g.useEffect)((function(){var e=n.objectId;xe().then((function(t){var n=t.map((function(e,t){return Object(K.a)({objectId:e.id,No:t+1},e.toJSON())}));b(n);var c=n.findIndex((function(t){return t.objectId===e}));p({index:c+1,length:n.length})}),(function(){B.b.error("\u83b7\u53d6\u6587\u7ae0\u5931\u8d25")}))}),[n]),Object(g.useEffect)((function(){var e=function(e){var t=e.keyCode;if(t&&!window.event.ctrlKey){var n=String.fromCharCode(t),c=qe.indexOf(n);if(-1!=c&&c<m.length){var a=m[c];N(a)}}};return window.addEventListener("keydown",e),function(){window.removeEventListener("keydown",e)}}),[m]),Object(g.useEffect)((function(){if(!(x.length<0)){!function(e){for(var t=e.querySelectorAll("i"),n=0;n<t.length;n++)t[n].parentElement.removeChild(t[n])}(i.current);for(var e=function(e){return m.find((function(t){return t.id===e}))},t=0;t<x.length;t++){var n=x[t],c=n.id,a=n.categoryId,r=ee(c),o=e(a);if(o){var s=o.text,l=o.color;ne(r,{text:s,color:l})}}}}),[x,m]),Object(g.useEffect)((function(){if(a){var e=a;e.on(Fe.a.event.CREATE,(function(e){e.sources.map((function(e){var t={start:e.start||e.startMeta,end:e.end||e.endMeta,text:e.text,id:e.id,categoryId:e.categoryId||window.categoryId,config:Object.assign(e.config||{},window.config)};r(Se(t))}))})).on(Fe.a.event.HOVER,(function(t){var n=t.id;e.addClass("highlight-wrap-hover",n)})).on(Fe.a.event.HOVER_OUT,(function(t){var n=t.id;e.removeClass("highlight-wrap-hover",n)}))}}),[a]),Object(g.useEffect)((function(){i.current.addEventListener("click",(function(e){e.target.tagName}))}),[]),Object(g.useEffect)((function(){var e=function(e){e.preventDefault(),e.returnValue=y?"\u60a8\u7684\u6570\u636e\u5c1a\u672a\u4fdd\u5b58\uff0c\u79bb\u5f00\u540e\u4f1a\u4e22\u5931":""};return y&&window.addEventListener("beforeunload",e),function(){window.removeEventListener("beforeunload",e)}}),[y]);var N=function(e){var t=e.id,n=e.color;window.categoryId=t;var c=a,i="color-".concat(n),o=window.getSelection();c.setOption({style:{className:i}}),c.fromRange(o.getRangeAt(0)),r(Ee(!0))},S=function(e){var t=n.objectId,c=f.findIndex((function(e){return e.objectId===t}));if("pre"===e?c-=1:"next"===e&&(c+=1),c>=0&&c<f.length)if(y)B.b.error("\u6587\u7ae0\u5fd8\u8bb0\u4fdd\u5b58\u4e86\uff0c\u4fdd\u5b58\u4e00\u4e0b");else{var a=f[c],i=new URL(window.location.href);i.hash="#/edit/".concat(a.objectId),window.location.href=i.href}else B.b.error("\u5df2\u7ecf\u662f\u7b2c\u4e00\u7bc7\u6587\u7ae0\u6216\u6700\u540e\u4e00\u7bc7\u6587\u7ae0\u4e86\uff0c\u4e0d\u80fd\u518d\u8df3\u8f6c\u4e86")};return console.log("isSave",y),Object(Oe.jsxs)("div",{className:k,children:[Object(Oe.jsx)("div",{className:"action",children:m.map((function(e,t){e.color;var n=e.text;return Object(Oe.jsxs)(V.a,{onClick:function(){return N(e)},children:[qe[t],"\uff1a",n]},t)}))}),Object(Oe.jsx)("div",{id:"iloveyryr",ref:i,className:"content",dangerouslySetInnerHTML:{__html:l}}),Object(Oe.jsx)(C.a,{when:y,message:"\u60a8\u7684\u5185\u5bb9\u5c1a\u672a\u4fdd\u5b58\u786e\u5b9a\u8981\u79bb\u5f00\u5417?"}),Object(Oe.jsxs)("div",{className:"action",children:[Object(Oe.jsx)(V.a,{onClick:function(){return S("pre")},children:"\u4e0a\u4e00\u7bc7"}),Object(Oe.jsx)(V.a,{onClick:function(){return S("next")},children:"\u4e0b\u4e00\u7bc7"}),Object(Oe.jsx)("span",{children:"".concat(v.index," / ").concat(v.length)})]})]})},Te=(n(283),n(321)),De=(console.log.bind(console,"[comment]"),function(e){var t,n=e.className,c=e.highlighter,a="zz-comment",i=M()((t={},Object(A.a)(t,a,!0),Object(A.a)(t,n,n),t)),r=Object(G.b)(),o=Object(G.c)((function(e){return e.annotation.annotationList})),s=Object(G.c)((function(e){return e.header.categoryList}));return Object(Oe.jsxs)("div",{className:i,children:[Object(Oe.jsx)("header",{children:"\u6211\u7684\u6807\u6ce8\u5217\u8868"}),Object(Oe.jsx)(Te.b,{itemLayout:"horizontal",className:"".concat(a,"-list"),dataSource:o,renderItem:function(e){var t=s.find((function(t){return t.id===e.categoryId}));return Object(Oe.jsxs)(Te.b.Item,{className:"".concat(a,"-list-item"),children:[t&&e&&"".concat(t.text,": ").concat(e.text),Object(Oe.jsx)("div",{className:"action",children:Object(Oe.jsx)("a",{onClick:function(){return t=e.id,void _.a.confirm({title:"\u5220\u9664",icon:Object(Oe.jsx)(W.a,{}),content:"\u786e\u8ba4\u5220\u9664\u5417\uff1f",okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88",onCancel:function(){console.log("\u53d6\u6d88")},onOk:function(){r(Ie(t)),r(Ee(!0)),c.remove(t)}});var t},onMouseEnter:function(){return t=e.id,void c.addClass("highlight-wrap-hover",t);var t},onMouseLeave:function(){return t=e.id,void c.removeClass("highlight-wrap-hover",t);var t},children:"delete"},"list-loadmore-edit")})]})}})]})}),Be=n(322),Ve=n(323),Je=(n(284),J.a.Option),_e=function(e){var t=R.a.useForm(),n=Object(w.a)(t,1)[0],c=function(e,t){n.setFieldsValue(Object(A.a)({},e,t))};return Object(Oe.jsx)("div",{className:"yryr-form-wrap",children:Object(Oe.jsxs)(R.a,{className:"search-form",layout:"inline",form:n,onFinish:function(t){e.onChange&&e.onChange(t)},autoComplete:"off",children:[Object(Oe.jsx)(R.a.Item,{name:"title",label:"\u6587\u7ae0\u6807\u9898",children:Object(Oe.jsx)(Z.a,{})}),Object(Oe.jsx)(R.a.Item,{name:"score",label:"\u6c49\u8bed\u6c34\u5e73",children:Object(Oe.jsxs)(J.a,{onChange:c,allowClear:!0,children:[Object(Oe.jsx)(Je,{value:"mid",children:"\u4e2d\u7ea7"}),Object(Oe.jsx)(Je,{value:"high",children:"\u9ad8\u7ea7"})]})}),Object(Oe.jsx)(R.a.Item,{name:"nationality",label:"\u6bcd\u8bed",children:Object(Oe.jsxs)(J.a,{onChange:c,allowClear:!0,children:[Object(Oe.jsx)(Je,{value:"korea",children:"\u97e9\u8bed"}),Object(Oe.jsx)(Je,{value:"britain",children:"\u82f1\u8bed"})]})}),Object(Oe.jsx)(R.a.Item,{children:Object(Oe.jsx)(V.a,{type:"primary",htmlType:"submit",children:"\u641c\u7d22"})})]})})},Re={BLCU:"hsk\u52a8\u6001\u4f5c\u6587\u8bed\u6599\u5e93",SYSU:"\u4e2d\u5c71\u5927\u5b66\u6c49\u5b57\u504f\u8bef\u4e2d\u4ecb\u8bed\u8bed\u6599\u5e93",mid:"\u4e2d\u7ea7",high:"\u9ad8\u7ea7",korea:"\u97e9\u8bed",britain:"\u82f1\u8bed"},He=function(e){var t=e.loading,n=e.dataSource,c=e.onUpdate,a=Object(g.useState)(n||[]),i=Object(w.a)(a,2),r=i[0],o=i[1],s=Object(C.g)(),l=[{title:"No.",dataIndex:"No",key:"No"},{title:"\u6807\u9898",dataIndex:"title",key:"title"},{title:"\u8bed\u6599\u6765\u6e90",dataIndex:"source",key:"source",render:function(e){return Re[e]||e}},{title:"\u6bcd\u8bed",dataIndex:"nationality",key:"nationality",render:function(e){return Re[e]||e}},{title:"\u6c49\u8bed\u6c34\u5e73",dataIndex:"score",key:"score",render:function(e){return Re[e]||e}},{title:"\u6807\u6ce8\u6570\u91cf",dataIndex:"annotationCount",key:"annotationCount"},{title:"Action",key:"action",render:function(e,t){return Object(Oe.jsxs)(Be.b,{size:"middle",children:[Object(Oe.jsx)("a",{onClick:function(){return u(t.objectId)},type:"primary",children:"\u6807\u6ce8"}),Object(Oe.jsx)("a",{onClick:function(){return j(t.objectId)},children:"\u7f16\u8f91"}),Object(Oe.jsx)(Ve.a,{title:"\u5220\u9664\u540e\u65e0\u6cd5\u6062\u590d\uff0c\u8bf7\u8c28\u614e\u64cd\u4f5c",onConfirm:function(){return d(t.objectId)},children:Object(Oe.jsx)("a",{type:"primary",danger:!0,children:"\u5220\u9664"})})]})}}];Object(g.useEffect)((function(){o(n)}),[n]);var u=function(e){s.push({pathname:"/edit/".concat(e)})},d=function(e){var t;console.log("\u5220\u9664\u529f\u80fd",e),(t=e,be.Object.createWithoutData("Article",t).destroy()).then((function(){B.b.success("\u5220\u9664\u6210\u529f"),c&&c()})).catch((function(){B.b.success("\u5220\u9664\u5931\u8d25")}))},j=function(t){e.onUpdate&&e.onUpdate(t)};return Object(Oe.jsxs)("div",{children:[Object(Oe.jsx)(_e,{onChange:function(e){console.log("\u8c03\u7528",e);var t=n.filter((function(t){var n=!0;return Object.keys(e).forEach((function(c){e[c]&&e[c]!==t[c]&&(n=!1)})),n}));console.log("\u8c03\u7528",t),o(t)}}),Object(Oe.jsx)(ye.a,{loading:t,bordered:!0,columns:l,dataSource:r,pagination:{showTotal:function(e){return"\u5f53\u524d\u5171\u6709".concat(e,"\u6761\u6570\u636e")}}})]})},Qe=n(169),Ze=n(313),We=n(67),Ue=J.a.Option,Pe=Z.a.TextArea,Ge={labelCol:{span:4},wrapperCol:{span:20}},Ke=function(e){var t=e.visible,n=e.articleId,c=e.onOk,a=e.onFail,i=R.a.useForm(),r=Object(w.a)(i,1)[0];Object(g.useEffect)((function(){t&&n&&xe(n).then((function(e){var t=e.toJSON();console.log("articleObj",t),r.setFieldsValue(Object(K.a)({},t))}))}),[t,n]);var o=function(e,t){r.setFieldsValue(Object(A.a)({},e,t))},s=function(){e.onCancel&&e.onCancel()};return Object(Oe.jsx)(_.a,{title:n?"\u7f16\u8f91\u6587\u7ae0":"\u6dfb\u52a0\u6587\u7ae0",visible:t,onOk:function(){r.submit(),e.onOk&&e.onOk()},onCancel:s,okText:n?"\u786e\u5b9a":"\u6dfb\u52a0",cancelText:"\u53d6\u6d88",children:Object(Oe.jsxs)(R.a,Object(K.a)(Object(K.a)({},Ge),{},{labelAlign:"right",form:r,name:"dynamic_form_nest_item",onFinish:function(e){n?ge(n,e).then((function(e){B.b.success("\u4fee\u6539\u6210\u529f"),c&&c()}),(function(e){B.b.error("\u4fee\u6539\u5931\u8d25"),a&&a()})):function(e){var t=new(be.Object.extend("Article"));return Object.keys(e).forEach((function(n){t.set(n,e[n])})),t.save()}(e).then((function(e){s(),B.b.success("\u6dfb\u52a0\u6210\u529f"),c&&c()}),(function(e){B.b.error("\u6dfb\u52a0\u5931\u8d25"),a&&a()})),console.log("values",e)},autoComplete:"off",children:[Object(Oe.jsx)(R.a.Item,{name:"title",label:"\u6587\u7ae0\u6807\u9898",rules:[{required:!0}],children:Object(Oe.jsx)(Z.a,{})}),Object(Oe.jsx)(R.a.Item,{name:"source",label:"\u8bed\u6599\u6765\u6e90",rules:[{required:!0}],children:Object(Oe.jsxs)(J.a,{onChange:o,allowClear:!0,children:[Object(Oe.jsx)(Ue,{value:"BLCU",children:"hsk\u52a8\u6001\u4f5c\u6587\u8bed\u6599\u5e93"}),Object(Oe.jsx)(Ue,{value:"SYSU",children:"\u4e2d\u5c71\u5927\u5b66\u6c49\u5b57\u504f\u8bef\u4e2d\u4ecb\u8bed\u8bed\u6599\u5e93"})]})}),Object(Oe.jsx)(R.a.Item,{name:"score",label:"\u6c49\u8bed\u6c34\u5e73",rules:[{required:!0}],children:Object(Oe.jsxs)(J.a,{onChange:o,allowClear:!0,children:[Object(Oe.jsx)(Ue,{value:"mid",children:"\u4e2d\u7ea7"}),Object(Oe.jsx)(Ue,{value:"high",children:"\u9ad8\u7ea7"})]})}),Object(Oe.jsx)(R.a.Item,{name:"nationality",label:"\u56fd\u7c4d",rules:[{required:!0}],children:Object(Oe.jsxs)(J.a,{onChange:o,allowClear:!0,children:[Object(Oe.jsx)(Ue,{value:"korea",children:"\u97e9\u56fd"}),Object(Oe.jsx)(Ue,{value:"britain",children:"\u82f1\u56fd"})]})}),Object(Oe.jsx)(R.a.Item,{name:"article",label:Object(Oe.jsx)(We.a,{title:"\u53ef\u4ee5\u586b\u5165\u5df2\u6807\u6ce8\u7684\u5185\u5bb9",children:Object(Oe.jsx)("span",{children:"\u6587\u7ae0\u5185\u5bb9"})}),rules:[{required:!0}],children:Object(Oe.jsx)(Pe,{rows:5})})]}))})},Ye=(n(288),function(e){var t=e.visible,n=e.count,c=(e.onOk,e.onCancel);Object(G.c)((function(e){return e.annotation.config}));return Object(Oe.jsx)(_.a,{title:"\u7edf\u8ba1\u5206\u6790",okText:"\u786e\u5b9a",cancelText:"\u53d6\u6d88",visible:t,onOk:function(){c&&c()},width:800,onCancel:function(){console.log("\uff1f\uff1f\uff1f\u8c03\u7528\u4e00\u4e0b\u554a"),c&&c()},children:Object(Oe.jsxs)("div",{children:["\u5b57\u6570\u7edf\u8ba1\uff1a",n,"\u5b57"]})})}),Xe=function(){var e=Object(g.useState)(!1),t=Object(w.a)(e,2),n=t[0],c=t[1],a=Object(g.useState)(!1),i=Object(w.a)(a,2),r=i[0],o=i[1],s=Object(g.useState)(!1),l=Object(w.a)(s,2),u=l[0],d=l[1],j=Object(g.useState)([]),f=Object(w.a)(j,2),b=f[0],h=f[1],O=Object(g.useState)([]),v=Object(w.a)(O,2),p=v[0],m=v[1],x=Object(g.useState)([]),y=Object(w.a)(x,2),k=y[0],C=y[1],N=Object(g.useState)([]),S=Object(w.a)(N,2),I=S[0],E=S[1],A=Object(g.useState)(""),L=Object(w.a)(A,2),M=L[0],F=L[1],q=Object(g.useState)(0),z=Object(w.a)(q,2),T=z[0],D=z[1],J=Object(g.useCallback)((function(){var e=0;d(!0),xe().then((function(t){var n=t.map((function(e,t){return Object(K.a)({objectId:e.id,No:t+1},e.toJSON())}));n.forEach((function(t){e+=t.article.length})),D(e),h(n),d(!1)}),(function(){d(!1),B.b.error("\u83b7\u53d6\u6587\u7ae0\u5931\u8d25")}))}),[]),_=Object(g.useCallback)((function(){he("610291721de21d3e072c5432").then((function(e){var t=e.get("categoryList");m(t)}))}),[]);Object(g.useEffect)((function(){J(),_()}),[J,_]),Object(g.useEffect)((function(){if(p.length>0&&b.length>0){var e=b.map((function(e){var t={},n=0;e.annotation&&e.annotation.length>0&&(e.annotation.forEach((function(e){var n=p.find((function(t){return t.id===e.categoryId}));t[n.text]?t[n.text]+=1:t[n.text]=1})),n=e.annotation.length);var c=function(e){var t=document.createElement("div");return t.innerHTML=e,t.textContent.replace(/\n/g,"").replace(/&/g,"").replace(/@/g,"").replace(/<.>/g,"").replace(/CZ|BZ|SBZ|BGFZ/g,"").replace(/<>/g,"").replace(/(\u3010(.*?)\u3011)/g,(function(e){return e[1]}))}(e.article);return Object(K.a)({No:e.No,title:e.title,nationality:e.nationality,score:e.score,source:e.source,count:n,words:c.length},t)})),t=b.map((function(e){var t={},n=0;return e.annotation&&e.annotation.length>0&&(e.annotation.forEach((function(e){var n=p.find((function(t){return t.id===e.categoryId}));if(t[n.text]){var c=t[n.text].length+1,a="".concat(c,".").concat(e.text);t[n.text].push(a)}else t[n.text]=["1.".concat(e.text)]})),n=e.annotation.length),Object.keys(t).forEach((function(e){return t[e]=t[e].join("\n")})),Object(K.a)({No:e.No,title:e.title,nationality:e.nationality,score:e.score,source:e.source,count:n},t)}));C(e),E(t)}}),[p,b]);return Object(Oe.jsxs)("div",{className:"yryr-admin",children:[Object(Oe.jsx)(Le,{type:"admin"}),Object(Oe.jsxs)("div",{className:"main",children:[Object(Oe.jsxs)("div",{className:"action",children:[Object(Oe.jsx)(V.a,{type:"secondary",onClick:function(){c(!0),F("")},children:"\u4e0a\u4f20\u6587\u7ae0"}),Object(Oe.jsx)(Ze.a,{type:"vertical"}),Object(Oe.jsx)(V.a,{type:"secondary",onClick:function(){return o(!0)},children:"\u6574\u4f53\u7edf\u8ba1"}),Object(Oe.jsx)(Ze.a,{type:"vertical"}),Object(Oe.jsx)(V.a,{type:"primary",children:Object(Oe.jsx)(Qe.CSVLink,{filename:"anaphoric-data.csv",data:k,children:"\u5bfc\u51fa\u6570\u636e"})}),Object(Oe.jsx)(Ze.a,{type:"vertical"}),Object(Oe.jsx)(V.a,{type:"primary",children:Object(Oe.jsx)(Qe.CSVLink,{filename:"anaphoric-data-text.csv",data:I,children:"\u5bfc\u51fa\u6587\u672c"})})]}),Object(Oe.jsx)(He,{dataSource:b,loading:u,onUpdate:function(e){c(!0),F(e)}})]}),Object(Oe.jsx)(Ke,{articleId:M,visible:n,onOk:function(){c(!1),J()},onCancel:function(){c(!1)}},Date.now()),Object(Oe.jsx)(Ye,{visible:r,count:T,onCancel:function(){return o(!1)}})]})},$e=(n(289),function(){var e=Object(g.useState)(""),t=Object(w.a)(e,2),n=t[0],c=t[1],a=Object(g.useState)(new Array(1400).fill("")),i=Object(w.a)(a,2),r=i[0],o=i[1],s=Object(g.useState)(0),l=Object(w.a)(s,2),u=l[0],d=l[1];return Object(Oe.jsxs)("div",{className:"shenlun-wrap",children:[Object(Oe.jsx)(Z.a.TextArea,{className:"input",type:"text",value:n,onChange:function(e){var t=e.target.value;if(JSON.stringify(t).includes("\\n")){var n=25-t.length%25;t=t.replace("\n"," "+new Array(n).fill(" ").join("")),window.string=t}c(t);var a=new Array(1400).fill("");Array.from(t).forEach((function(e,t){a[t]=e})),o(a),d(t.length)}}),Object(Oe.jsx)("div",{className:"list",children:r.map((function(e,t){var n=M()({item:!0,active:u===t});return Object(Oe.jsxs)("div",{className:n,children:[e,(t+1)%100===0&&Object(Oe.jsx)("div",{className:"count",children:t+1})]},t)}))})]})}),et=n(316),tt=function(e){var t=new be.Query("Question");return t.limit(1e3),e&&t.containedIn("id",e),t.find()},nt=function(e){var t=new be.Query("Question");return"object"===typeof e?t.containedIn("id",e):t.equalTo("id",e),t.limit(1e3),t.find()},ct=function(e){var t=[];return e.forEach((function(e){var n=new(be.Object.extend("Question"));Object.keys(e).forEach((function(t){n.set(t,e[t])})),t.push(n)})),be.Object.saveAll(t)},at=function(e,t){return be.Object.createWithoutData("QuestionBook",e).save({notes:t})},it=function(e){var t=be.Object.createWithoutData("Category","62031ff0a10bf856ff93cf99");return Object.keys(e).forEach((function(n){t.set(n,e[n])})),t.save()},rt=function(e){return new be.Query("Category").get(e||"62031ff0a10bf856ff93cf99")},ot=function(e){var t=be.Object.createWithoutData("Category","6253f0461122b910ec5dfd1e");return Object.keys(e).forEach((function(n){t.set(n,e[n])})),t.save()},st=(n(123),function(e){var t=new be.Query("FbQuestion");return t.limit(1e3),e&&t.containedIn("id",e),t.find()}),lt=function(e,t){var n=new be.Query("QuestionBook");return n.limit(1e3),t&&n.skip(t),e&&n.containedIn("id",e),n.find()},ut=function(e){var t=[];return e.forEach((function(e){var n=new(be.Object.extend("FbQuestion"));Object.keys(e).forEach((function(t){n.set(t,e[t])})),t.push(n)})),be.Object.saveAll(t)},dt=function(){var e=Object(g.useState)([]),t=Object(w.a)(e,2),n=t[0],c=t[1],a=Object(C.g)();Object(g.useEffect)((function(){rt("625d56e11122b910ec683964").then((function(e){var t=e.toJSON().content;i(t),console.log("res",t),c(t)}))}),[]);var i=function e(t){t.forEach((function(t){t.title=Object(Oe.jsxs)("div",{className:"category-item",children:[Object(Oe.jsx)("div",{className:"name",children:t.name}),Object(Oe.jsxs)("div",{className:"num",children:[t.questionIds.length,"\u9898"]}),Object(Oe.jsx)("div",{className:"practice",children:Object(Oe.jsx)(V.a,{onClick:function(){return e=t.questionIds,t.id,void a.push({pathname:"/book/".concat(e.toString())});var e},shape:"round",children:"\u7ec3\u4e60"})})]}),t.key=t.id,t.children&&e(t.children)}))};return Object(Oe.jsx)("div",{className:"xing-ce-book",children:Object(Oe.jsx)("div",{className:"category",children:Object(Oe.jsx)(et.a,{className:"xing-ce-tree",treeData:n})})})},jt=n(324),ft=(n(290),function(e){var t=e.data,n=t.correctAnswer,c=t.solution,a=t.keypoints,i=t.questionMeta,r=t.source,o=t.id,s=t.notes,l=["A","B","C","D"];Object(g.useEffect)((function(){}),[]);return Object(Oe.jsxs)("div",{className:"answer",children:[Object(Oe.jsxs)("div",{className:"correct",children:[Object(Oe.jsxs)("p",{children:["\u6b63\u786e\u7b54\u6848\u662f\uff1a",Object(Oe.jsx)("span",{children:l[n.choice]})]}),Object(Oe.jsx)(V.a,{onClick:function(){e.onClose()},children:"\u6536\u8d77"})]}),Object(Oe.jsx)(Ze.a,{}),Object(Oe.jsxs)("ul",{children:[Object(Oe.jsxs)("li",{children:[Object(Oe.jsx)("span",{children:"\u89e3\u6790\uff1a"}),Object(Oe.jsx)("div",{className:"content",dangerouslySetInnerHTML:{__html:c}})]}),Object(Oe.jsxs)("li",{children:[Object(Oe.jsx)("span",{children:"\u8003\u70b9\uff1a"}),Object(Oe.jsx)("div",{className:"content",children:a.map((function(e,t){return Object(Oe.jsx)(jt.a,{color:"#108ee9",children:e.name},t)}))})]}),Object(Oe.jsxs)("li",{children:[Object(Oe.jsx)("span",{children:"\u6765\u6e90\uff1a"}),Object(Oe.jsx)("div",{className:"content",children:r})]}),Object(Oe.jsxs)("li",{children:[Object(Oe.jsx)("span",{children:"\u7edf\u8ba1\uff1a"}),Object(Oe.jsxs)("div",{className:"content",children:[Object(Oe.jsxs)(jt.a,{color:"green",children:["\u6b63\u786e\u7387\uff1a",i.correctRatio.toFixed(2),"%"]}),Object(Oe.jsxs)(jt.a,{color:"magenta",children:["\u6613\u9519\u9879\uff1a",l[i.mostWrongAnswer.choice]]})]})]}),Object(Oe.jsxs)("li",{children:[Object(Oe.jsx)("span",{children:"\u9898\u53f7\uff1a"}),Object(Oe.jsx)("div",{className:"content",children:o})]}),Object(Oe.jsxs)("li",{children:[Object(Oe.jsx)("span",{children:"\u7b14\u8bb0\uff1a"}),Object(Oe.jsx)("div",{onClick:function(){e.onChange&&e.onChange(e.data)},className:"question-notes",children:Object(Oe.jsx)("div",{className:"html",dangerouslySetInnerHTML:{__html:s}})})]})]})]})}),bt=n(329),ht=n(56),Ot=n(328),vt=n(199),pt=n(200),mt=n(29),xt=n(188),gt=function(){function e(t){var n=this;Object(ue.a)(this,e);var c=new xt.fabric.Canvas(t,{isDrawingMode:!0,width:document.body.clientWidth,height:document.body.clientHeight});this.past=[],this.future=[],this.canvas=c,this.canvas.freeDrawingBrush.width=3,this.canvas.freeDrawingBrush.color="#ff4d4f",c.on("mouse:up",(function(){var e=c.toDatalessJSON();n.past.push(e),n.future=[]}))}return Object(de.a)(e,[{key:"undo",value:function(){var e=this.past,t=this.future;if(!(e.length<=0)){var n=e[e.length-1];this.past=e.slice(0,e.length-1),this.future=[n].concat(Object(mt.a)(t)),0===this.past.length?this.canvas.loadFromJSON({}):this.canvas.loadFromJSON(this.past[this.past.length-1])}}},{key:"redo",value:function(){if(!(this.future.length<=0)){var e=this.future[0];this.past=[].concat(Object(mt.a)(this.past),[e]),this.future=this.future.slice(1),this.canvas.loadFromJSON(e)}}},{key:"clear",value:function(){this.canvas.clear(),this.canvas.remove(this.canvas.getObjects()),this.past=[],this.future=[]}}]),e}();n(298);var yt=function(e){var t=Object(g.useRef)(null),n=Object(g.useRef)(null);return Object(g.useEffect)((function(){var e=new gt(t.current);n.current=e}),[]),Object(Oe.jsxs)("div",{className:"mj-sketch",children:[Object(Oe.jsxs)("div",{className:"control-panel",children:[Object(Oe.jsx)(ht.a,{onClick:function(){e.onClose&&e.onClose()},className:"icon",style:{color:"#fff",fontSize:24}}),Object(Oe.jsx)(Ot.a,{onClick:function(){n.current.undo()},className:"icon",style:{color:"#fff",fontSize:24}}),Object(Oe.jsx)(vt.a,{onClick:function(){n.current.redo()},className:"icon",style:{color:"#fff",fontSize:24}}),Object(Oe.jsx)(pt.a,{onClick:function(){n.current.clear()},className:"icon",style:{color:"#fff",fontSize:24}})]}),Object(Oe.jsx)("canvas",{ref:t})]})};n(299);var kt=function(e){var t,n=e.data,c=e.index,a=e.layout,i=e.className,r=e.status,o=Object(g.useState)(!1),s=Object(w.a)(o,2),l=s[0],u=s[1],d=M()((t={question:!0},Object(A.a)(t,i,i),Object(A.a)(t,r,r),t));return Object(Oe.jsxs)("div",{className:d,children:[Object(Oe.jsxs)("span",{children:[c+1,"."]}),Object(Oe.jsxs)("div",{className:"content",children:[Object(Oe.jsx)("div",{className:"title",children:Object(Oe.jsx)("span",{dangerouslySetInnerHTML:{__html:n.content}})}),Object(Oe.jsx)("div",{className:"options ".concat(a),children:n.accessories[0]&&n.accessories[0].options.map((function(t,c){var a=c==n.selectIndex&&"correct"==n.status?"correct":"wrong",i=M()(Object(A.a)({option:!0},a,c===n.selectIndex));return Object(Oe.jsxs)("div",{onClick:function(){return function(t,n){e.onClick&&e.onClick(t,n)}(n,c)},className:i,children:[Object(Oe.jsxs)("span",{className:"num",children:[["A","B","C","D"][c],"."]}),Object(Oe.jsx)("span",{dangerouslySetInnerHTML:{__html:t}})]},c)}))}),Object(Oe.jsx)(bt.a,{className:"edit-icon",onClick:function(){console.log("\u70b9\u51fb",l),u(!0)},style:{fontSize:22,color:"#a2a9be"}})]}),l&&Object(Oe.jsx)(yt,{onClose:function(){u(!1)}})]})},wt=n(147),Ct=n(330);n(300),Z.a.TextArea;var Nt=function(e){var t=e.filterIdList,n=e.onChange,c=Object(g.useState)(!1),a=Object(w.a)(c,2),i=a[0],r=a[1],o=Object(g.useState)(40),s=Object(w.a)(o,2),l=s[0],u=s[1],d=Object(g.useState)(""),j=Object(w.a)(d,2),f=j[0],b=j[1],h=Object(g.useState)({key:"",value:""}),O=Object(w.a)(h,2),v=O[0],p=O[1],m=function(e,t){var n=e.target.value;p(Object(K.a)(Object(K.a)({},v),{},Object(A.a)({},t,n)))};return Object(Oe.jsxs)("div",{className:"book-oper",children:[Object(Oe.jsx)(Ct.a,{onClick:function(){r(!0)},style:{fontSize:24}}),Object(Oe.jsx)(_.a,{title:"\u64cd\u4f5c",visible:i,onOk:function(){n&&n({count:l,filterIds:f,answer:v}),r(!1)},onCancel:function(){r(!1)},children:Object(Oe.jsxs)("div",{className:"btn-list",children:[Object(Oe.jsxs)("div",{className:"item",children:[Object(Oe.jsx)("h3",{className:"label",children:"\u9009\u62e9\u9898\u91cf\uff1a"}),Object(Oe.jsxs)(wt.a.Group,{onChange:function(e){var t=e.target.value;u(t)},value:l,children:[Object(Oe.jsx)(wt.a,{value:10,children:"10\u9898"}),Object(Oe.jsx)(wt.a,{value:20,children:"20\u9898"}),Object(Oe.jsx)(wt.a,{value:30,children:"30\u9898"}),Object(Oe.jsx)(wt.a,{value:40,children:"40\u9898"})]})]}),Object(Oe.jsxs)("div",{className:"item",children:[Object(Oe.jsx)("h3",{className:"label",children:"\u7b5b\u9009\u9898\u76ee\uff1a"}),Object(Oe.jsx)(Z.a,{value:t,placeholder:"\u8bf7\u7b5b\u9009\u9898\u76ee\u7684id",onChange:function(e){var t=e.target.value;b(t)}})]}),Object(Oe.jsxs)("div",{className:"item",children:[Object(Oe.jsx)("h3",{className:"label",children:"\u9a8c\u8bc1\u7b54\u6848\uff1a"}),Object(Oe.jsxs)(Z.a.Group,{compact:!0,children:[Object(Oe.jsx)(Z.a,{type:"number",style:{width:"20%"},onChange:function(e){return m(e,"key")},placeholder:"\u7ec3\u4e60\u51e0\uff1f"}),Object(Oe.jsx)(Z.a,{style:{width:"80%"},onChange:function(e){return m(e,"value")},defaultValue:"",placeholder:"\u8bf7\u8f93\u5165\u7b54\u6848\uff0c\u9017\u53f7\u5206\u9694"})]})]})]})})]})},St=n(318);var It=function(e){var t=e.count,n=new Array(t).fill(0);return Object(Oe.jsx)("div",{className:"skeleton-list",children:n.map((function(e,t){return Object(Oe.jsx)(St.a,{active:!0},t)}))})};var Et=function(e,t){var n=Object(g.useState)([]),c=Object(w.a)(n,2),a=c[0],i=c[1];return Object(g.useEffect)((function(){if(e.length<=0||t.length<=0)i(e);else{var n=e.filter((function(e){return t.includes(String(e.id))}));i(n)}}),[e,t]),{visibleData:a}},At=n(146);var Lt=function(e){var t=Object(g.useRef)(null),n=e.visible,c=e.onOk,a=e.onCancel,i=e.value;return Object(g.useEffect)((function(){t.current&&t.current.setContent(i||"")}),[i]),Object(Oe.jsx)(_.a,{forceRender:!0,width:1e3,title:"\u7f16\u8f91\u7b14\u8bb0",visible:n,onOk:function(){var e=t.current.getContent();c&&c(e)},onCancel:function(){a&&a()},children:Object(Oe.jsx)(At.a,{className:"notes-editor",onInit:function(e,n){t.current=n},apiKey:"24p0l3ih7zoyefn7sj47oxgrjz14zp69vuiyxo9tzk25oapj",init:{height:500,menubar:!1,plugins:["advlist","autolink","lists","link","image","charmap","anchor","searchreplace","visualblocks","code","fullscreen","insertdatetime","media","table","preview","help","wordcount"],toolbar:"undo redo | blocks | bold italic forecolor | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | removeformat | help",content_style:"body { font-family:Helvetica,Arial,sans-serif; font-size:14px }"}})})};var Mt=function(){var e=Object(g.useState)([]),t=Object(w.a)(e,2),n=t[0],c=t[1],a=Object(C.h)();return Object(g.useEffect)((function(){var e=a.objectId;if(e&&e.includes(",")){var t=e.split(",").filter((function(e){return""!=e})).map((function(e){return parseInt(e)}));c(t)}}),[a]),{questionIds:n}};n(301);var Ft=function(){var e=Object(g.useState)({isMobile:!1}),t=Object(w.a)(e,2),n=t[0],c=t[1];return Object(g.useEffect)((function(){var e=function(){console.log("document.body.clientWidth",document.body.clientWidth),document.body.clientWidth<1200&&c((function(e){return Object(K.a)(Object(K.a)({},e),{},{isMobile:!0})}))};return e(),window.addEventListener("resize",e),function(){window.removeEventListener("resize",e)}}),[]),{isMobile:n.isMobile}},qt=function(e,t){if(!t&&0!==t)return Object(K.a)(Object(K.a)({},e),{},{answerVisible:!1,status:"",selectIndex:""});var n="";return n=e.correctAnswer.choice==t?"correct":"wrong",Object(K.a)(Object(K.a)({},e),{},{answerVisible:!0,status:n,selectIndex:t})},zt=function(){var e=Object(g.useState)(40),t=Object(w.a)(e,2),n=t[0],c=t[1],a=Object(g.useState)([]),i=Object(w.a)(a,2),r=i[0],o=i[1],s=Object(g.useState)([]),l=Object(w.a)(s,2),u=l[0],d=l[1],j=Object(g.useState)({id:"",content:""}),f=Object(w.a)(j,2),b=f[0],h=f[1],O=Object(g.useState)(!1),v=Object(w.a)(O,2),p=v[0],m=v[1],x=Ft().isMobile,y=Et(r,u).visibleData,k=Mt().questionIds,C=Object(g.useCallback)((function(e){for(var t=[],n=0;n<e.length/1e3;n++){var c=lt(e,1e3*n);t.push(c)}Promise.all(t).then((function(e){var t=e.map((function(e){return function(e,t){return e.map((function(e){return e.toJSON()})).sort((function(e,t){return t.questionMeta.totalCount-e.questionMeta.totalCount})).map((function(e){var n="four",c=[];e.accessories[0].options.forEach((function(e){c.push(e.length)}));var a=Math.max.apply(Math,c);return a>=20?n="one":a>10&&(n="two"),t&&(n="one"),Object(K.a)(Object(K.a)({},e),{},{layout:n})}))}(e,x)})).flat();o(t)})).catch((function(e){console.log("err",e)}))}),[x]);Object(g.useEffect)((function(){var e=window.localStorage.getItem("dataSource");e?o(e):C(k)}),[k,C]);var N=function(e,t){var n=e.id,c=r.map((function(e){return e.id===n?qt(e,t):e}));o(c)},S=function(e,t){var n=r.map((function(e){return parseInt(e.correctAnswer.choice)+1})),c=0,a=0,i=[],o=[],s=t.split("").filter((function(e){return" "!=e}));(s.includes("A")||s.includes("B")||s.includes("C")||s.includes("D"))&&(s=s.map((function(e){return e.charCodeAt()-64})),console.log("arr",s));for(var l=e;l<s.length+e;l++){var u=n[l],d=s[c];c++,u==d?a++:(i.push(l+1),o.push(r[l].id))}var j=parseInt(100*a/s.length),f=i.join(", "),b=n.slice(e,s.length+e).map((function(e,t){return t%5===0?" "+String.fromCharCode(e+64):String.fromCharCode(e+64)})).join("");_.a.success({title:"\u7b54\u6848\u9a8c\u8bc1\u7ed3\u679c",content:Object(Oe.jsxs)("div",{children:[Object(Oe.jsxs)("p",{children:["\u6b63\u786e\u7387\uff1a",j,"%"]}),Object(Oe.jsxs)("p",{children:["\u9519\u9898\uff1a",f]}),Object(Oe.jsxs)("p",{children:["\u6b63\u786e\u7b54\u6848\uff1a",b]})]})})};return window.getAnswer=S,Object(Oe.jsxs)("div",{className:"book-wrap",children:[Object(Oe.jsx)(Nt,{onChange:function(e){var t=e.count,n=e.filterIds,a=e.answer;c(t);var i=n?n.split(","):[];d(i);var r=a.key,o=a.value;S((r-1)*t,o)}}),Object(Oe.jsx)("div",{className:"wrap-print",children:y.length<=0?Object(Oe.jsx)(It,{count:10}):Object(Oe.jsx)("div",{className:"list",children:y.map((function(e,t){return Object(Oe.jsxs)("div",{className:"item-wrap",children:[t%n===0&&Object(Oe.jsxs)("h2",{children:["\u7ec3\u4e60\u9898",parseInt(t/n)+1]}),Object(Oe.jsxs)("div",{className:"item",children:[Object(Oe.jsx)(kt,{status:e.status,data:e,index:t,layout:e.layout,onClick:N}),e.answerVisible&&Object(Oe.jsx)(ft,{onChange:function(){return t=e,console.log("data",t),h({id:t.objectId,content:t.notes||""}),void m(!0);var t},onClose:function(){return function(e){var t=e.id,n=r.map((function(e){return e.id===t?qt(e):e}));o(n)}(e)},data:e})]})]},e.id)}))})}),Object(Oe.jsx)(Lt,{value:b.content,visible:p,onOk:function(e){at(b.id,e).then((function(){C(k),m(!1),B.b.success("\u66f4\u65b0\u6210\u529f")})).catch((function(){B.b.error("\u66f4\u65b0\u5931\u8d25")}))},onCancel:function(){m(!1)}})]})},Tt=(n(302),n(184),function e(t){Object(ue.a)(this,e),this.id=t,this.sku=new Set}),Dt=console.log.bind(console,"[adj-list]"),Bt=[{skuId:1,list:["\u610f\u5916\u9669","\u5341\u5e74","0\u5c81\u523018\u5c81"]},{skuId:2,list:["\u610f\u5916\u9669","\u4e00\u767e\u5e74","0\u5c81\u523018\u5c81"]},{skuId:3,list:["\u8f66\u9669","\u5341\u5e74","0\u5c81\u523018\u5c81"]},{skuId:4,list:["\u8f66\u9669","\u5341\u5e74","19\u5c81\u523060\u5c81"]},{skuId:5,list:["\u5065\u5eb7\u9669","\u4e00\u5343\u5e74","61\u5c81\u5230100\u5c81"]},{skuId:6,list:["\u5065\u5eb7\u9669","\u4e00\u5343\u5e74","0\u5c81\u523018\u5c81"]},{skuId:7,list:["\u5065\u5eb7\u9669","\u5341\u5e74","19\u5c81\u523060\u5c81"]}],Vt=[{title:"\u4fdd\u9669\u79cd\u7c7b",key:"type",list:["\u610f\u5916\u9669","\u8f66\u9669","\u5065\u5eb7\u9669"]},{title:"\u4fdd\u969c\u65f6\u95f4",key:"time",list:["\u5341\u5e74","\u4e00\u767e\u5e74","\u4e00\u5343\u5e74"]},{title:"\u6295\u4fdd\u4eba\u5e74\u9f84",key:"age",list:["0\u5c81\u523018\u5c81","19\u5c81\u523060\u5c81","61\u5c81\u5230100\u5c81"]}];(new(function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];Object(ue.a)(this,e),this.vertices=[],this.adjList=new Map,this.isDirected=t}return Object(de.a)(e,[{key:"loadDataSource",value:function(e,t){var n=this;e.reduce((function(e,t){return e.concat(t.list)}),[]).forEach((function(e){var t=new Tt(e);n.addVertex(t)}));for(var c=0;c<e.length;c++)for(var a=e[c].list,i=0;i<a.length;i++)for(var r=0;r<a.length;r++)a[i]!==a[r]&&this.addEdge(a[i],a[r],parseInt(100*Math.random()));for(var o=0;o<t.length;o++)for(var s=t[o].list,l=t[o].skuId,u=0;u<s.length;u++)for(var d=0;d<s.length;d++)s[u]!==s[d]&&this.addEdge(s[u],s[d],l)}},{key:"getVertexById",value:function(e){return this.vertices.find((function(t){return t.id===e}))}},{key:"hasVertex",value:function(e){return this.vertices.includes(e)}},{key:"hasEdge",value:function(e,t){return this.adjList.get(e).includes(t)}},{key:"addVertex",value:function(e){this.hasVertex(e)||(this.vertices.push(e),this.adjList.set(e,[]))}},{key:"addEdge",value:function(e,t,n){var c=this.getVertexById(e),a=this.getVertexById(t);c&&a?this.hasEdge(c,a)||(c.sku.add(n),a.sku.add(n),this.adjList.get(c).push(a),this.adjList.get(a).push(c)):console.log("v, w\u8282\u70b9\u4e0d\u5b58\u5728, \u8bf7\u5148\u6dfb\u52a0\u5165\u8282\u70b9\u4e2d")}},{key:"getVertices",value:function(){return this.vertices}},{key:"getExistVertices",value:function(){return this.existVertices}},{key:"getVertexIdList",value:function(e){if(e){var t=this.getVertexById(e);return this.adjList.get(t).map((function(e){return e.id}))}return this.vertices.map((function(e){return e.id}))}},{key:"getAdjList",value:function(){return this.adjList}},{key:"vertexToString",value:function(e){return"[".concat(e.id,", ").concat(Object(mt.a)(e.sku),"] ")}},{key:"toString",value:function(){for(var e="",t=0;t<this.vertices.length;t++){var n=this.vertices[t];e+="".concat(this.vertexToString(n)," -> ");for(var c=this.adjList.get(this.vertices[t]),a=0;a<c.length;a++)e+="".concat(this.vertexToString(c[a])," ");e+="\n"}return e}},{key:"find",value:function(e,t){return this.adjList.get(e).includes(t)}},{key:"getSkuIntersection",value:function(e){for(var t=new Map,n=0;n<e.length;n++){Object(mt.a)(e[n]).forEach((function(e){t.has(e)?t.set(e,2):t.set(e,1)}))}return Object(mt.a)(t).filter((function(e){var t=Object(w.a)(e,2);t[0];return t[1]>1})).map((function(e){var t=Object(w.a)(e,2),n=t[0];t[1];return n}))}},{key:"getIntersection",value:function(e){if(window.adj=[0,0],e.length<=0)return this.getVertexIdList();if(1===e.length)return this.getVertexIdList(e[0]);for(var t=new Map,n=[],c=0;c<e.length;c++){var a=e[c],i=this.getVertexById(a);n.push(i.sku);var r=this.adjList.get(i);Dt("adj",r),window.adj[c]=r;for(var o=0;o<r.length;o++){var s=r[o];t.has(s)?t.set(s,2):t.set(s,1)}}Dt("[...map]",Object(mt.a)(t),Object(mt.a)(t).filter((function(e){var t=Object(w.a)(e,2);t[0];return t[1]>1})).map((function(e){var t=Object(w.a)(e,2),n=t[0];t[1];return n})));var l=this.getSkuIntersection(n);return Object(mt.a)(t).filter((function(e){var t=Object(w.a)(e,2);t[0];return t[1]>1})).filter((function(e){var t=Object(w.a)(e,2),n=t[0],c=(t[1],n.sku);return l.every((function(e){return c.has(e)}))})).map((function(e){var t=Object(w.a)(e,2),n=t[0];t[1];return n.id}))}}]),e}())).loadDataSource(Vt,Bt);var Jt=n(325),_t=function(e){for(var t=Math.random();t<Math.pow(10,e-1);)t*=10;return parseInt(t)},Rt=function(e,t){var n=e;for(n>100&&(n/=10);n<Math.pow(10,t-1);)n*=10;return parseInt(n)},Ht=(n(163),function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n=function(){var e=_t(3),t=_t(3);return{formula:Object(Oe.jsxs)("div",{children:[e,Object(Oe.jsx)("div",{className:"divider"}),t]}),formatAnswer:Rt(e/t,3),errorAnalysis:function(e,t){return Math.abs("0.".concat(e)-"0.".concat(t))/"0.".concat(t)<=.03}}},c=function(){for(var e=_t(3),t=_t(3),n=Rt(e/t,2);n/10<5||n%10<5;)e=_t(3),t=_t(3),n=Rt(e/t,2);return{formula:Object(Oe.jsxs)("div",{children:[e,Object(Oe.jsx)("div",{className:"divider"}),t]}),formatAnswer:Rt(e/t,2),errorAnalysis:function(e,t){return Math.abs(e-t)<=1}}},a=function(){var e=_t(3),t=_t(3)/10;return{formula:Object(Oe.jsxs)("div",{children:[Object(Oe.jsxs)("span",{children:[e," * ",t,"%"]}),Object(Oe.jsx)("div",{className:"divider"}),Object(Oe.jsxs)("span",{children:["1 + ",t,"%"]})]}),formatAnswer:Math.round(e*(t/100)/(1+t/100)),errorAnalysis:function(e,t){return Math.abs(e-t)/t<=.05}}},i=function(){var e=_t(3),t=_t(3);return{formula:Object(Oe.jsxs)("div",{children:[e,"+",t]}),formatAnswer:e+t,errorAnalysis:function(e,t){return e-t===0}}},r=function(){var e=_t(3),t=_t(3);return{formula:Object(Oe.jsxs)("div",{children:[e,"-",t]}),formatAnswer:e-t,errorAnalysis:function(e,t){return e-t===0}}},o=function(){var e=_t(2),t=_t(2);return{formula:Object(Oe.jsxs)("div",{children:[e," * ",t]}),formatAnswer:e*t,errorAnalysis:function(e,t){return Math.abs(e-t)/t<=.03}}},s=function(){for(var e=_t(3),t=_t(1);e%10<3||t<3;)e=_t(3),t=_t(1);return{formula:Object(Oe.jsxs)("div",{children:[e," * ",t]}),formatAnswer:e*t,errorAnalysis:function(e,t){return e-t===0}}},l=function(){for(var e=_t(2),t=_t(1);e<10;)e=_t(2),t=_t(1);return{formula:Object(Oe.jsxs)("div",{children:[e," * ",t]}),formatAnswer:e*t,errorAnalysis:function(e,t){return e-t===0}}},u=function(){var e=_t(3),t=_t(3);return{formula:Object(Oe.jsxs)("div",{children:[e," * ",t]}),formatAnswer:Rt(e*t,3),errorAnalysis:function(e,t){return Math.abs(e-t)/t<=.03}}},d=function(){var e={"33.3%":3,"25%":4,"20%":5,"16.7%":6,"14.3%":7,"12.5%":8,"11.1%":9,"10%":10,"9.1%":11,"8.3%":12,"7.7%":13,"7.1%":14,"6.7%":15,"6.25%":16,"5.9%":17,"5.6%":18,"5.3%":19,"11%":9.1,"12%":8.3,"13%":7.7,"14%":7.1,"15%":6.7,"16%":6.25,"17%":5.9,"18%":5.6,"19%":5.3},t=Object.keys(e).sort((function(){return Math.random()-.5})),n=-1;return function(){return n+=1,{formula:Object(Oe.jsx)("div",{children:t[n]}),formatAnswer:e[t[n]],errorAnalysis:function(e,t){return e-t===0}}}},j={1:n,2:a,3:i,4:r,5:o,6:u,7:d(),8:c,9:s,10:l},f=[],b=0;b<t;b++){var h=j[e](),O=Object(K.a)({input:"",time:""},h);f.push(O)}return f}),Qt=[{type:"span",label:"\u7b97\u5f0f",span:8},{type:"input",label:"\u8f93\u5165",span:6},{type:"alert",label:"answer",span:6},{type:"span",label:"time",span:4}],Zt=function(){var e=Object(g.useState)(Qt),t=Object(w.a)(e,2),n=t[0],c=(t[1],Object(g.useState)(1)),a=Object(w.a)(c,2),i=a[0],r=a[1],o=Object(g.useState)(!1),s=Object(w.a)(o,2),l=s[0],u=s[1],d=Object(g.useState)(0),j=Object(w.a)(d,2),f=j[0],b=j[1],h=Object(g.useState)((function(){return Ht()})),O=Object(w.a)(h,2),v=O[0],p=O[1];window.data=v;var m=Object(g.useState)({start:"",end:""}),x=Object(w.a)(m,2),y=x[0],k=x[1],C="calc-wrap";return Object(Oe.jsxs)("div",{className:C,children:[Object(Oe.jsxs)("div",{className:"".concat(C,"-method"),children:[Object(Oe.jsx)(V.a,{onClick:function(){p(Ht(i)),u(!1),b(0),k({start:"",end:""})},children:"\u5237\u65b0\u6570\u636e"}),Object(Oe.jsxs)(wt.a.Group,{onChange:function(e){var t=e.target.value,n=Ht(t);p(n),r(t),u(!1)},value:i,children:[Object(Oe.jsx)(wt.a,{value:1,children:"\u9664\u6cd5"}),Object(Oe.jsx)(wt.a,{value:2,children:"\u589e\u957f\u91cf"}),Object(Oe.jsx)(wt.a,{value:3,children:"\u52a0\u6cd5"}),Object(Oe.jsx)(wt.a,{value:4,children:"\u51cf\u6cd5"}),Object(Oe.jsx)(wt.a,{value:5,children:"\u4e24\u4f4d\u6570\u4e58\u6cd5"}),Object(Oe.jsx)(wt.a,{value:6,children:"\u4e09\u4f4d\u6570\u4e58\u6cd5"}),Object(Oe.jsx)(wt.a,{value:7,children:"\u7279\u6b8a\u5206\u6570"}),Object(Oe.jsx)(wt.a,{value:8,children:"\u9ad8\u96be\u5ea6\u9664\u6cd5"}),Object(Oe.jsx)(wt.a,{value:9,children:"3*1\u4e58\u6cd5"}),Object(Oe.jsx)(wt.a,{value:10,children:"2*1\u4e58\u6cd5"})]})]}),Object(Oe.jsx)("div",{className:"".concat(C,"-content"),children:Object(Oe.jsxs)("div",{className:"list",children:[Object(Oe.jsx)(H.a,{className:"list-item",children:n.map((function(e,t){return Object(Oe.jsx)(Q.a,{className:"list-item-num",span:e.span,children:e.label},t)}))}),Object(Oe.jsx)(R.a,{children:v.map((function(e,t){var n=e.formula,c=e.input,a=e.formatAnswer,i=e.errorAnalysis,r=e.time-y.start;if(t>1){var o=v[t-1];r=e.time-o.time}return Object(Oe.jsxs)(H.a,{className:"list-item",children:[Object(Oe.jsx)(Q.a,{span:8,className:"list-item-num list-item-a",children:n}),Object(Oe.jsx)(Q.a,{span:6,className:"list-item-num list-item-b",children:Object(Oe.jsx)(Z.a,{type:"tel",onClick:function(){return function(e){0===e&&(console.log("start!!!"),k(Object(K.a)(Object(K.a)({},y),{},{start:Date.now()})))}(t)},onChange:function(e){return function(e,t){var n=v.map((function(n,c){return t===c?Object(K.a)(Object(K.a)({},n),{},{input:e.target.value}):n}));p(n)}(e,t)},onBlur:function(){return function(e){var t=v.map((function(t,n){return e===n?Object(K.a)(Object(K.a)({},t),{},{time:Date.now()}):t}));p(t)}(t)},value:c})}),l&&Object(Oe.jsx)(Q.a,{span:6,className:"list-item-num list-item-c",children:Object(Oe.jsx)(Jt.a,{message:a,type:i(c,a)?"success":"error",showIcon:!0})}),l&&Object(Oe.jsx)(Q.a,{span:4,className:"list-item-num list-item-c",children:parseInt(r/1e3)})]},t)}))}),Object(Oe.jsx)(V.a,{onClick:function(){u(!0);var e=0;v.forEach((function(t){var n=t.input,c=t.formatAnswer;(0,t.errorAnalysis)(n,c)&&e++})),b(e),k(Object(K.a)(Object(K.a)({},y),{},{end:y.start?parseInt((Date.now()-y.start)/1e3):0}))},children:"\u9a8c\u8bc1\u7ed3\u679c"}),Object(Oe.jsxs)("div",{children:["\u901a\u8fc7: ",f,"/",v.length]}),Object(Oe.jsxs)("div",{children:["\u7528\u65f6: ",y.end,"s"]})]})})]})},Wt=(n(303),function(){return Object(g.useEffect)((function(){function e(){var e=document.getElementsByTagName("html")[0],t=document.documentElement.clientWidth,n=(t=t>1080?1080:t)/100;e.style.fontSize=n+"px"}e(),window.addEventListener("resize",e,!1);var t=document.querySelector(".box"),n=document.querySelector(".width"),c=document.querySelector(".height"),a=t.getBoundingClientRect(),i=a.width,r=a.height;n.innerHTML="\u5bbd\uff1a".concat(i),c.innerHTML="\u9ad8\uff1a".concat(r)}),[]),Object(Oe.jsxs)("div",{className:"wrap",children:[Object(Oe.jsx)("div",{className:"box"}),Object(Oe.jsx)("div",{className:"width",children:"\u5bbd\uff1a"}),Object(Oe.jsx)("div",{className:"height",children:"\u9ad8\uff1a"})]})}),Ut=n(315),Pt=n(331),Gt=Ut.a.Dragger,Kt=function(){var e=Object(g.useState)([]),t=Object(w.a)(e,2),n=t[0],c=t[1],a=Object(g.useState)(!1),i=Object(w.a)(a,2),r=i[0],o=(i[1],Object(g.useState)([])),s=Object(w.a)(o,2),l=s[0],u=s[1],d={name:"file",multiple:!0,action:"",onChange:function(e){var t=e.file.status;window.file=e.file,"uploading"!==t&&console.log(e.file,e.fileList),"done"===t?B.b.success("".concat(e.file.name," file uploaded successfully.")):"error"===t&&B.b.error("".concat(e.file.name," file upload failed."))},onDrop:function(e){console.log("Dropped files",e.dataTransfer.files)},beforeUpload:function(e){c([].concat(Object(mt.a)(n),[e]));var t=new FileReader;return t.onload=function(e){console.log("\u662f\u4e2a\u5565\u5440\uff1f",JSON.parse(e.target.result)),u(JSON.parse(e.target.result))},t.readAsText(e),!1}},j=function(){var e=Object(E.a)(I.a.mark((function e(t){var n,c,a;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=[1],c=t,a=I.a.mark((function e(){var t,a;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=c.map((function(e){return e.id})),e.next=3,nt(t);case 3:n=e.sent,a=new Set,n.forEach((function(e){a.add(e.toJSON().id)})),c=c.filter((function(e){return!a.has(e.id)})).map((function(e){return Object(K.a)(Object(K.a)({},e),{},{shortSource:null})}));case 7:case"end":return e.stop()}}),e)}));case 3:if(!(n.length>0)){e.next=7;break}return e.delegateYield(a(),"t0",5);case 5:e.next=3;break;case 7:return e.abrupt("return",c);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),f=function(){var e=Object(E.a)(I.a.mark((function e(){var t,n,c;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=l.category,n=l.question,e.next=3,j(n);case 3:(c=e.sent).length>0?(it({content:t}).then((function(e){B.b.success("\u4e0a\u4f20\u5206\u7c7b\u6210\u529f")}),(function(e){B.b.error(e.error||"\u4e0a\u4f20\u5206\u7c7b\u5931\u8d25")})),ct(c).then((function(e){B.b.success("\u4e0a\u4f20\u9898\u76ee\u6210\u529f")}),(function(e){B.b.error("\u4e0a\u4f20\u9898\u76ee\u5931\u8d25")}))):B.b.error("\u6ca1\u6709\u65b0\u7684\u6570\u636e");case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),b=function(){var e=Object(E.a)(I.a.mark((function e(){var t,n,c,a;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("dataSource",l),t=l,e.next=4,st();case 4:n=e.sent,c=new Set,n.forEach((function(e){c.add(e.toJSON().id)})),a=t.filter((function(e){return!c.has(e.id)})).map((function(e){return Object(K.a)(Object(K.a)({},e),{},{shortSource:null})})),B.b.success("\u91cd\u590d\u9898\u76ee\uff1a".concat(t.length-a.length)),a.length>0?ut(a).then((function(e){B.b.success("\u4e0a\u4f20\u9898\u76ee\u6210\u529f")}),(function(e){B.b.error("\u4e0a\u4f20\u9898\u76ee\u5931\u8d25")})):B.b.error("\u6ca1\u6709\u65b0\u7684\u6570\u636e");case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(Oe.jsx)("div",{className:"wrong",children:Object(Oe.jsxs)("div",{className:"upload",children:[Object(Oe.jsxs)(Gt,Object(K.a)(Object(K.a)({},d),{},{children:[Object(Oe.jsx)("p",{className:"ant-upload-drag-icon",children:Object(Oe.jsx)(Pt.a,{})}),Object(Oe.jsx)("p",{className:"ant-upload-text",children:"Click or drag file to this area to upload"}),Object(Oe.jsx)("p",{className:"ant-upload-hint",children:"Support for a single or bulk upload. Strictly prohibit from uploading company data or other band files"})]})),Object(Oe.jsxs)("div",{className:"upload-btn",children:[Object(Oe.jsx)(V.a,{type:"primary",onClick:f,loading:r,style:{marginTop:16},children:"\u4e0a\u4f20\u9519\u9898"}),Object(Oe.jsx)(Ze.a,{}),Object(Oe.jsx)(V.a,{type:"primary",onClick:b,loading:r,style:{marginTop:16},children:"\u4e0a\u4f20\u8bad\u7ec3\u9898"})]})]})})},Yt=(n(304),function(){var e=Object(g.useState)([]),t=Object(w.a)(e,2),n=t[0],c=t[1],a=Object(C.g)();Object(g.useEffect)((function(){rt().then((function(e){var t=e.toJSON().content;i(t),console.log("res",t),c(t)}))}),[]);var i=function e(t){t.forEach((function(t){t.title=Object(Oe.jsxs)("div",{className:"category-item",children:[Object(Oe.jsx)("div",{className:"name",children:t.name}),Object(Oe.jsxs)("div",{className:"num",children:[t.questionIds.length,"\u9898"]}),Object(Oe.jsx)("div",{className:"practice",children:Object(Oe.jsx)(V.a,{onClick:function(){return t.questionIds,e=t.id,void a.push("/xingce/".concat(e));var e},shape:"round",children:"\u5f00\u59cb\u7ec3\u4e60"})})]}),t.key=t.id,t.children&&e(t.children)}))};return Object(Oe.jsxs)("div",{className:"xing-ce",children:["hello, world",Object(Oe.jsx)("div",{className:"category",children:Object(Oe.jsx)(et.a,{className:"xing-ce-tree",treeData:n})})]})}),Xt=(n(305),function(e){var t=e.checked?"https://nodestatic.fbstatic.cn/weblts_spa_online/tiku/static/collected-btn.d4120fd14a7eda0e8e50.png":"https://nodestatic.fbstatic.cn/weblts_spa_online/tiku/static/collect-btn.e0cca1095b2514b3e6c5.png";return Object(Oe.jsx)("span",{onClick:function(){e.onClick&&e.onClick()},className:"collect-icon",children:Object(Oe.jsx)("img",{src:t,alt:""})})}),$t=function(e){var t=new be.Query("Collection");return t.limit(1e3),e&&t.containedIn("id",e),t.find()},en=function(){var e=Object(g.useRef)(null),t=Object(C.h)(),n=Object(g.useState)({}),c=Object(w.a)(n,2),a=c[0],i=c[1],r=Object(g.useState)(!0),o=Object(w.a)(r,2),s=o[0],l=o[1],u=Object(g.useState)(!1),d=Object(w.a)(u,2),j=d[0],f=d[1],b=Object(g.useState)([]),h=Object(w.a)(b,2),O=h[0],v=h[1],p=Object(g.useState)({}),m=Object(w.a)(p,2),x=m[0],y=m[1],k=Object(g.useState)([]),N=Object(w.a)(k,2),S=N[0],L=N[1];Object(g.useEffect)((function(){rt().then((function(e){var t=e.toJSON().content;v(t)})),q()}),[]),Object(g.useEffect)((function(){var e=t.objectId;if(e.includes(","))F();else if(O.length>0){var n="";!function e(t,n,c){for(var a=0;a<t.length;a++){var i=t[a];if(i.id==n)return void c(i.questionIds);i.children&&e(i.children,n,c)}}(O,e,(function(e){n=e})),n?tt(n).then((function(e){var t=e.map((function(e){return e.toJSON()}));L(t)})):B.b.error("\u9898\u76ee\u4e0d\u5b58\u5728")}}),[]);var F=function(){var e=function(){var e=Object(E.a)(I.a.mark((function e(t){var n,c,a,i,r;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,st(t);case 2:return n=e.sent,e.next=5,tt(t);case 5:return c=e.sent,e.next=8,lt(t);case 8:return a=e.sent,i=[].concat(Object(mt.a)(n.map((function(e){return e.toJSON()}))),Object(mt.a)(c.map((function(e){return e.toJSON()}))),Object(mt.a)(a.map((function(e){return e.toJSON()})))),r=[],t.forEach((function(e){var t=i.find((function(t){return t.id===e}));t&&r.push(t)})),e.abrupt("return",r);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n=t.objectId.split(",").filter((function(e){return""!=e})).map((function(e){return parseInt(e)}));l(!0),e(n).then((function(e){L(e),l(!1)})).catch((function(e){l(!1)}))},q=function(){$t().then((function(e){var t=e.map((function(e){return e.toJSON()})),n={};t.forEach((function(e){n[e.id]=e.objectId})),y(n)}))},z=function(e,t){if(t){var n=x[e.id];console.log("objectId",n),function(e){return be.Object.createWithoutData("Collection",e).destroy()}(n).then((function(){B.b.success("\u53d6\u6d88\u6536\u85cf"),q()})).catch((function(e){B.b.error("\u53d6\u6d88\u5931\u8d25")}))}else(function(e){var t=[];return e.forEach((function(e){var n=new(be.Object.extend("Collection"));Object.keys(e).forEach((function(t){n.set(t,e[t])})),t.push(n)})),be.Object.saveAll(t)})([{id:e.id}]).then((function(){B.b.success("\u6536\u85cf\u6210\u529f"),q()})).catch((function(e){B.b.error("\u6536\u85cf\u5931\u8d25")}))},T=function(t){var n=t.notes,c=t.objectId;t.id;i({id:c,notes:n}),console.log("data",t),f(!0),e.current.setContent(n||"")};return window.getAnswer=function(e,t){var n=S.map((function(e){return parseInt(e.correctAnswer.choice)+1})),c=0,a=0,i=[],r=[],o=t.split("").filter((function(e){return" "!=e}));(o.includes("A")||o.includes("B")||o.includes("C")||o.includes("D"))&&(o=o.map((function(e){return e.charCodeAt()-64})),console.log("arr",o));for(var s=e;s<o.length+e;s++){var l=n[s],u=o[c];c++,l==u?a++:(i.push(s+1),r.push(S[s].id))}console.log("\u6b63\u786e\u7387\uff1a",parseInt(100*a/o.length)),console.log("\u9519\u9898\uff1a",i.join(", ")),console.log("\u9898\u53f7\uff1a",r.join(", "))},Object(Oe.jsxs)("div",{className:"wrap",children:[Object(Oe.jsx)("h2",{children:"\u9519\u9898\u6574\u7406"}),Object(Oe.jsx)("div",{className:"wrap-print",children:s?Object(Oe.jsx)(St.a,{}):Object(Oe.jsx)("div",{className:"list",children:S.map((function(e,t){var n="four",c=[];e.accessories[0].options.forEach((function(e){c.push(e.length)}));var a=Math.max.apply(Math,c);a>=20?n="one":a>10&&(n="two");var i=M()(Object(A.a)({question:!0},e.status,e.status));return Object(Oe.jsxs)("div",{className:"item",children:[Object(Oe.jsxs)("div",{className:i,children:[Object(Oe.jsxs)("span",{children:[t+1,"."]}),Object(Oe.jsxs)("div",{className:"content",children:[Object(Oe.jsxs)("div",{className:"title",children:[Object(Oe.jsx)("span",{dangerouslySetInnerHTML:{__html:e.content}}),e.answerVisible&&Object(Oe.jsx)(Xt,{checked:x[e.id],onClick:function(){return z(e,x[e.id])}})]}),Object(Oe.jsx)("div",{className:"options ".concat(n),children:e.accessories[0]&&e.accessories[0].options.map((function(t,n){var c=n==e.selectIndex&&"correct"==e.status?"correct":"wrong",a=M()(Object(A.a)({option:!0},c,n===e.selectIndex));return Object(Oe.jsxs)("div",{onClick:function(){return function(e,t){var n=e.correctAnswer.choice,c=e.id,a="";a=n==t?"correct":"wrong";var i=S.map((function(e){return e.id===c?Object(K.a)(Object(K.a)({},e),{},{answerVisible:!0,status:a,selectIndex:t}):e}));L(i)}(e,n)},className:a,children:[Object(Oe.jsxs)("span",{className:"num",children:[["A","B","C","D"][n],"."]}),Object(Oe.jsx)("span",{dangerouslySetInnerHTML:{__html:t}})]},n)}))})]})]}),e.answerVisible&&Object(Oe.jsx)(ft,{onChange:T,onClose:function(){return function(e){var t=e.id,n=S.map((function(e){return e.id===t?Object(K.a)(Object(K.a)({},e),{},{answerVisible:!1,status:"",selectIndex:""}):e}));L(n)}(e)},data:e})]},e.id)}))})}),Object(Oe.jsx)(_.a,{forceRender:!0,width:1e3,title:"\u7f16\u8f91\u7b14\u8bb0",visible:j,onOk:function(){var t=e.current.getContent();console.log("activeNotes.objectId",a.id),at(a.id,t).then((function(e){B.b.success("\u66f4\u65b0\u6210\u529f"),F(),f(!1)})).catch((function(e){B.b.success("\u66f4\u65b0\u5931\u8d25")}))},onCancel:function(){f(!1)},children:Object(Oe.jsx)(At.a,{className:"notes-editor",onInit:function(t,n){l(!1),e.current=n},apiKey:"24p0l3ih7zoyefn7sj47oxgrjz14zp69vuiyxo9tzk25oapj",init:{height:500,menubar:!1,plugins:["advlist","autolink","lists","link","image","charmap","anchor","searchreplace","visualblocks","code","fullscreen","insertdatetime","media","table","preview","help","wordcount"],toolbar:"undo redo | blocks | bold italic forecolor | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | removeformat | help",content_style:"body { font-family:Helvetica,Arial,sans-serif; font-size:14px }"}})})]})},tn=(n(306),n(320)),nn=n(107),cn=n.n(nn),an=Z.a.TextArea,rn=_.a.confirm,on=function(e){var t=Object(C.g)(),n=R.a.useForm(),c=Object(w.a)(n,1)[0],a=Object(g.useState)([]),i=Object(w.a)(a,2),r=i[0],o=i[1],s=Object(g.useState)([]),l=Object(w.a)(s,2),u=l[0],d=l[1],j=Object(g.useState)([]),f=Object(w.a)(j,2),b=f[0],h=f[1],O=Object(g.useState)(),v=Object(w.a)(O,2),p=v[0],m=v[1],x=Object(g.useState)(),y=Object(w.a)(x,2),k=y[0],N=y[1],S=Object(g.useState)(!1),I=Object(w.a)(S,2),E=I[0],A=I[1],L=Object(g.useState)(!1),M=Object(w.a)(L,2),F=M[0],q=M[1],z=Object(g.useState)(!1),T=Object(w.a)(z,2),D=T[0],J=T[1],H=Object(g.useState)([]),Q=Object(w.a)(H,2),U=Q[0],P=Q[1];Object(g.useEffect)((function(){G()}),[]),Object(g.useEffect)((function(){m(JSON.stringify(r,null,4));var e=function e(t){if(!t)return 0;var n=0;return t.forEach((function(t){n+=t.questionIds.length,t.children&&(n+=e(t.children))})),n},t=function t(n){for(var c=[],a=0;a<n.length;a++){var i={},r=n[a],o=r.questionIds.length+e(r.children);i.title=Object(Oe.jsxs)("div",{style:{display:"flex"},className:"tree-title",children:[Object(Oe.jsx)("div",{className:"name",children:r.title}),Object(Oe.jsx)("div",{style:{marginLeft:"30px",fontSize:"12px",color:"#5f6368"},className:"num",children:"".concat(o,"\u9898")})]}),i.key=r.key,r.questionIds&&(i.questionIds=r.questionIds),r.children&&(i.children=t(r.children)),c.push(i)}return c}(r);d(t)}),[r]);var G=function(){var e=function e(t){for(var n=[],c=0;c<t.length;c++){var a={},i=t[c];a.label=i.title,a.value=i.key,i.children&&(a.children=e(i.children)),n.push(a)}return n};new be.Query("Category").get("6253f0461122b910ec5dfd1e").then((function(t){var n=t.toJSON().content;o(n);var c=e(n);console.log("caD",c),h(c)}))},K=function(e){if("category"===e)try{var t=JSON.parse(p);ot({content:t}).then((function(){A(!1),G(),B.b.success("\u66f4\u65b0\u6210\u529f\uff01")})).catch((function(){B.b.error("\u66f4\u65b0\u5931\u8d25\uff01")}))}catch(n){B.b.error("\u683c\u5f0f\u6709\u8bef\uff01")}else"question"===e?X():"delete"===e&&$()},Y=function(e){"category"===e?A(!1):(c.resetFields(),q(!1))},X=function(){console.log("form",c.getFieldsValue()),c.validateFields().then((function(e){var t=c.getFieldsValue(),n=t.question,a=t.category,i=n.split(","),o=a[a.length-1],s=function e(t,n){for(var c=[],a=0;a<t.length;a++){var r={},o=t[a];if(r.title=o.title,r.key=o.key,o.questionIds&&(r.questionIds=o.questionIds),o.children&&(r.children=e(o.children,n)),o.key==n){var s=cn.a.intersection(r.questionIds,i);if(console.log("obj.questionIds,",r.questionIds,i),s.length>0)B.b.error("\u60a8\u6dfb\u52a0\u7684\u90e8\u5206\u9898\u76ee\u5df2\u5b58\u5728\uff0c ".concat(s.toString()));else{var l=r.questionIds.concat(i);r.questionIds=l}console.log("\u6dfb\u52a0\u9898\u76ee\u6240\u5728\u7684ITEM",o)}c.push(r)}return c}(r,o);cn.a.isEqual(s,r)||ot({content:s}).then((function(){A(!1),G(),B.b.success("\u6dfb\u52a0\u6210\u529f\uff01\u5171\u6dfb\u52a0".concat(i.length,"\u9053\u9898\uff0c").concat(i.toString()))})).catch((function(){B.b.error("\u6dfb\u52a0\u5931\u8d25\uff01")}))})).catch((function(e){console.log("err",e)}))},$=function(){var e=k.split(",");if(e.length<=0)B.b.error("\u8bf7\u8f93\u5165\u6b63\u786e\u683c\u5f0f");else{var t=[],n=function e(t,n,c){for(var a=[],i=0;i<t.length;i++){var r={},o=t[i];if(r.title=o.title,r.key=o.key,o.questionIds){var s=cn.a.without.apply(cn.a,[o.questionIds].concat(Object(mt.a)(n)));if(s.length!==o.questionIds.length){var l=cn.a.xor(o.questionIds,s);c.push({title:r.title,ids:l})}r.questionIds=s}o.children&&(r.children=e(o.children,n,c)),a.push(r)}return a}(r,e,t);console.log("newData",n),console.log("treeData",r),t.length>0?rn({title:"\u60a8\u786e\u5b9a\u8981\u5220\u9664\u8fd9\u4e9b\u9898\u76ee\u5417?",icon:Object(Oe.jsx)(W.a,{}),content:Object(Oe.jsx)("div",{children:t.map((function(e,t){return Object(Oe.jsxs)("div",{children:[e.title,": ",e.ids.toString()]},t)}))}),onOk:function(){ot({content:n}).then((function(){J(!1),G(),B.b.success("\u5220\u9664\u6210\u529f\uff01")})).catch((function(){B.b.error("\u5220\u9664\u5931\u8d25\uff01")}))},onCancel:function(){console.log("Cancel")}}):B.b.warn("\u6ca1\u6709\u627e\u5230\u8be5\u9898\uff01")}};return Object(Oe.jsxs)("div",{className:"category-tree",children:[u.length>0?Object(Oe.jsx)(et.a,{defaultExpandAll:!0,checkable:!0,onSelect:function(e,t){var n=e[e.length-1];console.log("selected",n,t);var c=[];t.checkedNodes.forEach((function(e){c.push.apply(c,Object(mt.a)(e.questionIds))})),P(c),console.log("qIDs",c)},onCheck:function(e,t){var n=[];t.checkedNodes.forEach((function(e){n.push.apply(n,Object(mt.a)(e.questionIds))})),P(n)},treeData:u}):Object(Oe.jsx)(St.a,{}),Object(Oe.jsx)(Ze.a,{}),Object(Oe.jsxs)("span",{children:["\u5df2\u52fe\u9009",U.length,"\u9898"]}),Object(Oe.jsx)(Ze.a,{type:"vertical"}),Object(Oe.jsx)(V.a,{onClick:function(){t.push("/book/".concat(U.toString(),","))},children:"\u5f00\u59cb\u7ec3\u4e60"}),Object(Oe.jsx)(Ze.a,{}),Object(Oe.jsx)(V.a,{onClick:function(){A(!0)},children:"\u66f4\u65b0\u5206\u7c7b"}),Object(Oe.jsx)(Ze.a,{type:"vertical"}),Object(Oe.jsx)(V.a,{onClick:function(){q(!0)},children:"\u6dfb\u52a0\u9519\u9898"}),Object(Oe.jsx)(Ze.a,{type:"vertical"}),Object(Oe.jsx)(V.a,{danger:!0,onClick:function(){J(!0)},children:"\u5220\u9664"}),Object(Oe.jsx)(_.a,{width:800,title:"\u66f4\u65b0\u5206\u7c7b",visible:E,onOk:function(){return K("category")},onCancel:function(){return Y("category")},children:Object(Oe.jsx)(an,{rows:20,value:p,onChange:function(e){m(e.target.value)}})}),Object(Oe.jsx)(_.a,{width:600,title:"\u6dfb\u52a0\u9519\u9898",visible:F,okText:"\u63d0\u4ea4",okCancel:"\u53d6\u6d88",onOk:function(){return K("question")},onCancel:function(){return Y("question")},children:Object(Oe.jsxs)(R.a,{form:c,name:"basic",initialValues:{remember:!0},onFinish:function(e){console.log("values",e)},autoComplete:"off",children:[Object(Oe.jsx)(R.a.Item,{label:"\u5206\u7c7b",name:"category",rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u5206\u7c7b"}],children:Object(Oe.jsx)(tn.a,{options:b,placeholder:"Please select"})}),Object(Oe.jsx)(R.a.Item,{label:"\u9898\u76ee",name:"question",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u9898\u76ee"}],children:Object(Oe.jsx)(Z.a,{})}),Object(Oe.jsx)(R.a.Item,{children:Object(Oe.jsx)(V.a,{onClick:function(){var e=c.getFieldsValue().question;window.open("https://zmojm.github.io/build/index.html#/book/".concat(e,","),"","width=800,height=1000")},children:"\u9884\u89c8"})})]})}),Object(Oe.jsxs)(_.a,{width:600,title:"\u5220\u9664\u9519\u9898",visible:D,okText:"\u63d0\u4ea4",okCancel:"\u53d6\u6d88",onOk:function(){return K("delete")},onCancel:function(){return J(!1)},children:[Object(Oe.jsx)(Z.a,{value:k,onChange:function(e){return N(e.target.value)}}),Object(Oe.jsx)(Ze.a,{}),Object(Oe.jsx)(V.a,{onClick:function(){window.open("https://zmojm.github.io/build/index.html#/book/".concat(k,","),"","width=800,height=1000")},children:"\u9884\u89c8"})]})]})},sn=(J.a.Option,function(){var e=Object(g.useState)(!1),t=Object(w.a)(e,2),n=(t[0],t[1],Object(g.useState)([])),c=Object(w.a)(n,2),a=(c[0],c[1]),i=Object(g.useState)(0),r=Object(w.a)(i,2),o=(r[0],r[1],Object(g.useState)([])),s=Object(w.a)(o,2),l=(s[0],s[1]),u=Object(g.useState)([]),d=Object(w.a)(u,2),j=(d[0],d[1]);Object(C.g)();Object(g.useEffect)((function(){st().then((function(e){var t=e.map((function(e){return e.toJSON()}));a(t);for(var n=[],c=0;c<t.length;c+=10){var i=t.slice(c,c+10);n.push(i)}l(n)}))}),[]),Object(g.useEffect)((function(){$t().then((function(e){var t=e.map((function(e){return e.toJSON()})).map((function(e){return e.id}));j(t)})).catch((function(e){B.b.error("\u83b7\u53d6\u6570\u636e\u5931\u8d25")}))}),[]);return Object(Oe.jsx)("div",{className:"exam",children:Object(Oe.jsx)("div",{className:"category",children:Object(Oe.jsxs)("div",{className:"wrong-question",children:[Object(Oe.jsx)("h3",{children:"\u9519\u9898\u8bad\u7ec3"}),Object(Oe.jsx)(on,{})]})})})}),ln=(n(307),function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:20,t=function(){var e=_t(5),t=_t(3);return[e,t,Rt(e/t,3)]},n=function(){var e=_t(3),t=_t(3);return[e,t,e+t,e-t]},c=function(){for(var e=_t(2),t=_t(1);t<2;)t=_t(1);return[e,t,e*t]},a={1:n,2:c,3:t},i=[],r=0;r<e;r++){var o=a[1](),s=a[2](),l=a[3]();i.push([r+1].concat(Object(mt.a)(o),Object(mt.a)(s),Object(mt.a)(l)))}return i}),un=[{type:"span",label:"",span:2},{type:"span",label:"A",span:2},{type:"span",label:"B",span:2},{type:"span",label:"A+B",span:2},{type:"span",label:"A-B",span:2},{type:"span",label:"A",span:2},{type:"span",label:"B",span:2},{type:"span",label:"A*B",span:2},{type:"span",label:"A",span:2},{type:"span",label:"B",span:2},{type:"span",label:"A\xf7B",span:2}],dn=function(){var e=Object(g.useState)(un),t=Object(w.a)(e,2),n=t[0],c=(t[1],Object(g.useState)((function(){return ln()}))),a=Object(w.a)(c,2),i=a[0],r=a[1],o="calc-wrap calc-pdf";return Object(g.useEffect)((function(){document.title="\u901f\u7b97\u7ec3\u4e60";var e=ln();console.log("new",e),r(e)}),[]),Object(Oe.jsxs)("div",{className:o,children:[Object(Oe.jsxs)("div",{className:"test",children:[Object(Oe.jsx)("h3",{children:"\u901f\u7b97\u6280\u5de7\u7ec3\u4e60"}),Object(Oe.jsx)("div",{className:"".concat(o,"-content"),children:Object(Oe.jsxs)("div",{className:"list",children:[Object(Oe.jsx)(H.a,{className:"column list-item",children:n.map((function(e,t){return Object(Oe.jsx)("div",{className:"list-item-num",children:e.label},t)}))}),Object(Oe.jsx)("div",{className:"data",children:i.map((function(e,t){return console.log("arr",e.length),Object(Oe.jsx)(H.a,{className:"list-item",children:e.map((function(e,t){return Object(Oe.jsx)("div",{className:"list-item-num",children:[3,4,7,10].includes(t)?"":e},t)}))},"item-".concat(t))}))})]})})]}),Object(Oe.jsxs)("div",{className:"test-answer",children:[Object(Oe.jsx)("h3",{children:"\u901f\u7b97\u6280\u5de7\u7b54\u6848"}),Object(Oe.jsx)("div",{className:"".concat(o,"-content"),children:Object(Oe.jsxs)("div",{className:"list",children:[Object(Oe.jsx)(H.a,{className:"column list-item",children:n.map((function(e,t){return Object(Oe.jsx)("div",{className:"list-item-num",children:e.label},t)}))}),Object(Oe.jsx)("div",{className:"data",children:i.map((function(e,t){return console.log("arr",e.length),Object(Oe.jsx)(H.a,{className:"list-item",children:e.map((function(e,t){return Object(Oe.jsx)("div",{className:"list-item-num ".concat([3,4,7,10].includes(t)?"daan":""),children:e},t)}))},"item-".concat(t))}))})]})})]})]})},jn=function(){var e=Object(C.h)(),t=Object(g.useState)(new Fe.a({exceptSelectors:[".ant-list-item"]})),n=Object(w.a)(t,2),c=n[0],a=n[1];return Object(g.useEffect)((function(){var e=new Fe.a({exceptSelectors:[".ant-list-item"]});return a(e),function(){e.dispose()}}),[e]),Object(Oe.jsxs)("div",{className:"yryr-home",children:[Object(Oe.jsx)(Le,{}),Object(Oe.jsxs)("div",{className:"main",children:[Object(Oe.jsx)(ze,{highlighter:c},c),Object(Oe.jsx)(De,{highlighter:c},c)]})]})},fn=function(){return Object(Oe.jsx)(N.a,{children:Object(Oe.jsxs)(C.d,{children:[Object(Oe.jsx)(C.b,{exact:!0,path:"/",component:Xe}),Object(Oe.jsx)(C.b,{exact:!0,path:"/admin",component:Xe}),Object(Oe.jsx)(C.b,{exact:!0,path:"/shenlun",component:$e}),Object(Oe.jsx)(C.b,{exact:!0,path:"/edit/:objectId",component:jn}),Object(Oe.jsx)(C.b,{exact:!0,path:"/calc",component:Zt}),Object(Oe.jsx)(C.b,{exact:!0,path:"/calcPdf",component:dn}),Object(Oe.jsx)(C.b,{exact:!0,path:"/test",component:Wt}),Object(Oe.jsx)(C.b,{exact:!0,path:"/book",component:dt}),Object(Oe.jsx)(C.b,{exact:!0,path:"/book/:objectId",component:zt}),Object(Oe.jsx)(C.b,{exact:!0,path:"/question",component:Kt}),Object(Oe.jsx)(C.b,{exact:!0,path:"/XingCe",component:Yt}),Object(Oe.jsx)(C.b,{exact:!0,path:"/XingCe/:objectId",component:en}),Object(Oe.jsx)(C.b,{exact:!0,path:"/exam",component:sn})]})})},bn=(n(308),Object(Y.a)({reducer:{annotation:Ae,header:le}}));k.a.render(Object(Oe.jsx)(G.a,{store:bn,children:Object(Oe.jsx)(fn,{})}),document.getElementById("root"))}},[[309,1,2]]]);
//# sourceMappingURL=main.14a864a0.chunk.js.map