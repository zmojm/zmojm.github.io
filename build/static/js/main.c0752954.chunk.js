(this["webpackJsonpzz-tag"]=this["webpackJsonpzz-tag"]||[]).push([[0],{143:function(e,t,n){},268:function(e,t,n){},269:function(e,t,n){},270:function(e,t,n){},271:function(e,t,n){},275:function(e,t,n){},276:function(e,t,n){},277:function(e,t,n){},278:function(e,t,n){},279:function(e,t,n){},280:function(e,t,n){"use strict";n.r(t);var a,c,i,r,o,l,s,u,d,j,b,f,h,O,v,p,m,g,x=n(0),y=n(27),k=n.n(y),w=n(16),C=n(25),I=n(175),S=n(75),E=n.n(S),L=n(115),N=n(30),F=n(4),M=n.n(F),z=["title","titleId"];function T(){return T=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},T.apply(this,arguments)}function A(e,t){if(null==e)return{};var n,a,c=function(e,t){if(null==e)return{};var n,a,c={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(c[n]=e[n]);return c}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(c[n]=e[n])}return c}function V(e,t){var n=e.title,y=e.titleId,k=A(e,z);return x.createElement("svg",T({t:1624887109928,className:"icon",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg","p-id":3819,width:32,height:32,ref:t,"aria-labelledby":y},k),n?x.createElement("title",{id:y},n):null,a||(a=x.createElement("path",{d:"M187.2 341.7L77.9 232.4c-45.8-45.8-45.8-120.8 0-166.6s120.8-45.8 166.6 0l109.3 109.3c45.8 45.8 45.8 120.8 0 166.6s-120.8 45.8-166.6 0zM838.8 341.7l109.3-109.3c45.8-45.8 45.8-120.8 0-166.6s-120.7-45.8-166.6 0L672.2 175.2c-45.8 45.8-45.8 120.8 0 166.6 45.8 45.7 120.8 45.7 166.6-0.1z",fill:"","p-id":3820})),c||(c=x.createElement("path",{d:"M743.9 905.4l-140.7 15.9c-59.9 6.8-120.4 6.8-180.3 0l-140.7-15.9c-151.6 0-268.3-159.9-247.5-310.1l15.9-115c29.4-213.9 212.2-373.2 428-373.2h68.7c215.9 0 398.6 159.3 428.2 373.1l15.9 115c20.8 150.3-95.9 310.2-247.5 310.2z",fill:"#FCFCFC","p-id":3821})),i||(i=x.createElement("path",{d:"M513 936.3c-30.5 0-61-1.7-91.3-5.1l-140.2-15.8c-35.3-0.1-69.7-8.4-102.3-24.6-30.8-15.4-58.6-37.2-82.6-64.7-56.2-64.6-83.2-151.3-72-232.1l15.9-115c14.7-106 67.1-202.9 147.6-273 80.5-70.2 183.7-108.8 290.5-108.8h68.7c106.8 0 210 38.6 290.5 108.8a442.92 442.92 0 0 1 147.6 272.9l15.9 115c11.2 80.8-15.8 167.5-72 232.1-24 27.6-51.8 49.4-82.6 64.7-32.6 16.3-67 24.6-102.3 24.6l-140.2 15.8c-30.2 3.5-60.7 5.2-91.2 5.2z m-34.4-819.2c-102 0-200.5 36.9-277.4 103.9-76.8 67-126.9 159.6-140.8 260.6l-15.9 115c-10.4 75.1 14.8 156 67.3 216.2 46.4 53.2 106.9 82.5 170.4 82.5h0.6l0.6 0.1 140.7 15.9c59.1 6.7 119 6.7 178.1 0l141.3-15.9h0.6c63.5 0 124-29.3 170.4-82.5 52.5-60.3 77.7-141.1 67.3-216.2l-15.9-115c-14-101-64-193.6-140.9-260.6-76.9-67-175.4-103.9-277.4-103.9h-69z",fill:"#020202","p-id":3822})),r||(r=x.createElement("path",{d:"M433.4 495.1c19.4 75.4-54.2 166.4-129.6 185.8S179.7 669 160.3 593.6s26-222.8 101.4-242.2S414 419.7 433.4 495.1z",fill:"","p-id":3823})),o||(o=x.createElement("path",{d:"M298.6 513.9m-79.3 0a79.3 79.3 0 1 0 158.6 0 79.3 79.3 0 1 0-158.6 0Z",fill:"#FFFFFF","p-id":3824})),l||(l=x.createElement("path",{d:"M298.6 513.9m-50.9 0a50.9 50.9 0 1 0 101.8 0 50.9 50.9 0 1 0-101.8 0Z",fill:"","p-id":3825})),s||(s=x.createElement("path",{d:"M315.2 500.6m-20.3 0a20.3 20.3 0 1 0 40.6 0 20.3 20.3 0 1 0-40.6 0Z",fill:"#FFFFFF","p-id":3826})),u||(u=x.createElement("path",{d:"M592.6 495.1c-19.4 75.4 54.2 166.4 129.6 185.8s124.1-11.9 143.5-87.3c19.4-75.4-26-222.8-101.4-242.2S612 419.7 592.6 495.1z",fill:"","p-id":3827})),d||(d=x.createElement("path",{d:"M727.4 513.9m-79.3 0a79.3 79.3 0 1 0 158.6 0 79.3 79.3 0 1 0-158.6 0Z",fill:"#FFFFFF","p-id":3828})),j||(j=x.createElement("path",{d:"M727.4 513.9m-50.9 0a50.9 50.9 0 1 0 101.8 0 50.9 50.9 0 1 0-101.8 0Z",fill:"","p-id":3829})),b||(b=x.createElement("path",{d:"M710.8 500.6m-20.3 0a20.3 20.3 0 1 0 40.6 0 20.3 20.3 0 1 0-40.6 0Z",fill:"#FFFFFF","p-id":3830})),f||(f=x.createElement("path",{d:"M466.3 695.3a46.7 34.5 0 1 0 93.4 0 46.7 34.5 0 1 0-93.4 0Z",fill:"","p-id":3831})),h||(h=x.createElement("path",{d:"M485.9 823.1c0 9.5-12.1 17.1-27.1 17.1-15 0-27.1-7.7-27.1-17.1",fill:"#FCFCFC","p-id":3832})),O||(O=x.createElement("path",{d:"M458.8 850.3c-20.8 0-37.1-11.9-37.1-27.1 0-5.5 4.5-10 10-10s10 4.5 10 10c0 2.2 6.5 7.1 17.1 7.1 10.6 0 17.1-5 17.1-7.1 0-5.5 4.5-10 10-10s10 4.5 10 10c0 15.1-16.3 27.1-37.1 27.1z",fill:"","p-id":3833})),v||(v=x.createElement("path",{d:"M594.3 823.1c0 9.5-12.1 17.1-27.1 17.1-15 0-27.1-7.7-27.1-17.1",fill:"#FCFCFC","p-id":3834})),p||(p=x.createElement("path",{d:"M567.2 850.3c-20.8 0-37.1-11.9-37.1-27.1 0-5.5 4.5-10 10-10s10 4.5 10 10c0 2.2 6.5 7.1 17.1 7.1s17.1-5 17.1-7.1c0-5.5 4.5-10 10-10s10 4.5 10 10c0 15.1-16.3 27.1-37.1 27.1z",fill:"","p-id":3835})),m||(m=x.createElement("path",{d:"M485.9 823.1c0-9.5 12.1-17.1 27.1-17.1 15 0 27.1 7.7 27.1 17.1",fill:"#FCFCFC","p-id":3836})),g||(g=x.createElement("path",{d:"M550.1 823.1h-20c0-2.2-6.5-7.1-17.1-7.1-10.6 0-17.1 5-17.1 7.1h-20c0-15.2 16.3-27.1 37.1-27.1s37.1 11.9 37.1 27.1z",fill:"","p-id":3837})))}var B=x.forwardRef(V),U=(n.p,n(183)),D=n(34),Z=(n(143),n(107)),q=n(288),J=n(286),R=n(282),H=n(283),K=n(287),G=n(80),P=n(293),W=n(294),Q=n(26),_=n(24),Y=n(79),X={blue:"#0d6efd",indigo:"#6610f2",purple:"#6f42c1",pink:"#d63384",red:"#dc3545",orange:"#fd7e14",yellow:"#ffc107",green:"#198754",teal:"#20c997",cyan:"#0dcaf0"},$=[{key:"blue",label:"\u84dd\u8272",value:"#0d6efd"},{key:"indigo",label:"\u975b\u84dd\u8272",value:"#6610f2"},{key:"purple",label:"\u7d2b\u8272",value:"#6f42c1"},{key:"pink",label:"\u7c89\u8272",value:"#d63384"},{key:"red",label:"\u7ea2\u8272",value:"#dc3545"},{key:"orange",label:"\u6a59\u8272",value:"#fd7e14"},{key:"yellow",label:"\u9ec4\u8272",value:"#ffc107"},{key:"green",label:"\u7eff\u8272",value:"#198754"},{key:"teal",label:"\u84dd\u7eff\u8272",value:"#20c997"},{key:"cyan",label:"\u9752\u8272",value:"#0dcaf0"}],ee=function(e){var t=document.querySelectorAll('span[data-highlight-id="'.concat(e,'"]'));return t.length<=0&&(t=document.querySelectorAll('span[data-highlight-id-extra="'.concat(e,'"]'))),t},te=function(e,t){e.classList.contains(t)||e.classList.add(t)},ne=function(e,t){for(var n=t.text,a=t.color,c=0;c<e.length;c++){var i=e[c];te(i,"color-".concat(a));var r=i.dataset.highlightIdExtra||i.dataset.highlightId,o=ee(r);i===o[0]?i.dataset.text&&"null"!==i.dataset.text||(i.dataset.text=n):(i.dataset.text="null","tail"===i.dataset.highlightSplitType&&"null"===o[0].dataset.text&&(o[0].dataset.text=n))}},ae=Object(Y.b)({name:"header",initialState:{categoryList:[]},reducers:{createCategory:function(e,t){var n=e.categoryList.length,a=n<$.length?n:$.length-1;console.log("presetColor[index].key",$[a],$[a].key);var c={id:Object(Y.c)(),text:"",color:$[a].key,type:"accept"};e.categoryList.push(c)},changeCategory:function(e,t){var n=t.payload,a=n.id,c=n.name,i=n.value;console.log("action.payload",t.payload),e.categoryList=e.categoryList.map((function(e){return a===e.id?Object(_.a)(Object(_.a)({},e),{},Object(N.a)({},c,i)):e}))},deleteCategory:function(e,t){var n=t.payload;e.categoryList=e.categoryList.filter((function(e){return e.id!==n}))},updateCategory:function(e,t){e.categoryList=t.payload}}}),ce=ae.actions,ie=ce.createCategory,re=ce.changeCategory,oe=ce.updateCategory,le=ce.deleteCategory,se=ae.reducer,ue=n(42),de=n.n(ue);de.a.init({appId:"zhG78X78KsJ4MuyLquDrtexj-gzGzoHsz",appKey:"QhcOlKH32P32CCaEUbzJJWbo",serverURL:"https://syolnpzm.lc-cn-n1-shared.com"});var je=function(e){var t=new de.a.Query("Configs");return e?t.get(e):t.find()},be=n(6),fe=Z.a.Option,he="610291721de21d3e072c5432",Oe=function(e){var t=e.visible,n=e.onOk,a=e.onCancel,c=Object(x.useState)(!1),i=Object(w.a)(c,2),r=i[0],o=i[1],l=Object(Q.b)(),s=Object(Q.c)((function(e){return e.header.categoryList}));Object(Q.c)((function(e){return e.header}));Object(x.useEffect)((function(){je(he).then((function(e){var t=e.get("categoryList");l(oe(t))}))}),[]);var u=function(e){var t=e.id,n=e.value,a=e.name;l(re({id:t,value:n,name:a}))};return Object(be.jsx)(q.a,{title:"\u7f16\u8f91\u914d\u7f6e",okText:"\u786e\u5b9a",cancelText:"\u53d6\u6d88",confirmLoading:r,visible:t,onOk:function(){o(!0),function(e,t){var n=de.a.Object.createWithoutData("Configs",e);return Object.keys(t).forEach((function(e){n.set(e,t[e])})),n.save()}(he,{categoryList:s}).then((function(e){o(!1),U.b.success("\u4e0a\u4f20\u6210\u529f"),window.location.reload(),n&&n()})).catch((function(){o(!1),U.b.error("\u4e0a\u4f20\u5931\u8d25")}))},width:800,onCancel:function(){a&&a()},children:Object(be.jsxs)(J.a,{layout:"inline",children:[s.map((function(e,t){var n=e.id,a=e.text,c=e.color,i=e.type;return Object(be.jsxs)(R.a,{style:{marginBottom:30},children:[Object(be.jsx)(H.a,{children:Object(be.jsxs)(J.a.Item,{label:"\u6807\u6ce8\u989c\u8272",children:[Object(be.jsx)(Z.a,{value:c,style:{width:120},onChange:function(e){return u({id:n,value:e,name:"color"})},children:$.map((function(e,t){var n=e.key,a=e.label;return Object(be.jsx)(fe,{value:n,children:a},t)}))}),Object(be.jsx)("div",{style:{marginTop:5,borderRadius:3,height:20,backgroundColor:X[c]}})]})}),Object(be.jsx)(H.a,{children:Object(be.jsx)(J.a.Item,{label:"\u6807\u6ce8\u6587\u6848",children:Object(be.jsx)(K.a,{value:a,onChange:function(e){return u({id:n,value:e.target.value,name:"text"})},placeholder:"\u8bf7\u8f93\u5165\u6807\u6ce8\u7684\u6587\u6848"})})}),Object(be.jsx)(H.a,{children:Object(be.jsx)(J.a.Item,{label:"\u6279\u6ce8\u7c7b\u578b",children:Object(be.jsxs)(Z.a,{value:i,style:{width:120},onChange:function(e){return u({id:n,value:e,name:"type"})},children:[Object(be.jsx)(fe,{value:"accept",children:"\u6b63\u786e\u7c7b\u578b"}),Object(be.jsx)(fe,{value:"wrong",children:"\u9519\u8bef\u7c7b\u578b"})]})})}),Object(be.jsx)("div",{style:{display:"flex",alignItems:"center"},className:"delete",children:Object(be.jsx)(P.a,{onClick:function(){return function(e){q.a.confirm({title:"\u5220\u9664",icon:Object(be.jsx)(G.a,{}),content:"\u5220\u9664\u8be5\u6807\u6ce8\u540e\uff0c\u66fe\u7ecf\u4f7f\u7528\u8fc7\u8be5\u6807\u6ce8\u7684\u6570\u636e\u65e0\u6cd5\u6b63\u786e\u663e\u793a",okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88",onCancel:function(){console.log("\u53d6\u6d88")},onOk:function(){l(le(e)),console.log("\u5220\u9664",e)}})}(e.id)}})})]},n)})),Object(be.jsx)(D.a,{type:"dashed",onClick:function(){l(ie())},style:{marginTop:30},icon:Object(be.jsx)(W.a,{}),children:"\u6dfb\u52a0\u6807\u6ce8"})]})})};de.a.init({appId:"zhG78X78KsJ4MuyLquDrtexj-gzGzoHsz",appKey:"QhcOlKH32P32CCaEUbzJJWbo",serverURL:"https://zhg78x78.lc-cn-n1-shared.com"});var ve=function(e){var t=new de.a.Query("Article");return t.descending("createdAt"),e?t.get(e):(t.limit(500),t.find())},pe=function(e,t){var n=de.a.Object.createWithoutData("Article",e);return Object.keys(t).forEach((function(e){n.set(e,t[e])})),n.save()},me=n(285),ge=(Z.a.Option,function(e){var t=e.visible,n=(e.onOk,e.onCancel),a=Object(x.useState)(!1),c=Object(w.a)(a,2),i=c[0],r=(c[1],Object(Q.b)(),Object(x.useState)([])),o=Object(w.a)(r,2),l=o[0],s=o[1],u=(Object(Q.c)((function(e){return e.annotation.config})),Object(Q.c)((function(e){return e.annotation.annotationList}))),d=Object(Q.c)((function(e){return e.header.categoryList})),j=[{title:"No.",dataIndex:"No",key:"No"},{title:"Name",dataIndex:"name",key:"name"},{title:"Count",dataIndex:"count",key:"count"},{title:"Text",dataIndex:"text",key:"text",render:function(e){return Object(be.jsx)("div",{children:e.map((function(e,t){return Object(be.jsxs)("div",{children:[t+1,". ",e]},t)}))})}}];return Object(x.useEffect)((function(){if(t&&u&&u.length>0){var e={},n=0;u.forEach((function(t,a){var c=t.categoryId,i=t.text;if(e[c])e[c].count=e[c].count+1,e[c].text.push(i);else{var r=d.find((function(e){return e.id===c})).text;e[c]={key:n,No:n++,name:r,text:[i],count:1}}}));var a=Object.keys(e).map((function(t){return e[t]}));s(a)}}),[u,t,d]),Object(be.jsxs)(q.a,{title:"\u7edf\u8ba1\u5206\u6790",okText:"\u786e\u5b9a",cancelText:"\u53d6\u6d88",confirmLoading:i,visible:t,onOk:function(){n&&n()},width:800,onCancel:function(){console.log("\uff1f\uff1f\uff1f\u8c03\u7528\u4e00\u4e0b\u554a"),n&&n()},children:[Object(be.jsx)(me.a,{dataSource:l,columns:j}),";"]})}),xe=Object(Y.b)({name:"annotation",initialState:{annotationList:[],config:{},isSave:!1},reducers:{initAnnotation:function(e,t){var n=t.payload,a=n.annotation,c=n.score,i=n.nationality,r=n.source;e.annotationList=a||[],e.config={score:c,nationality:i,source:r}},createAnnotation:function(e,t){var n=t.payload;e.annotationList.some((function(e){return e.id===n.id}))||e.annotationList.push(n)},deleteAnnotation:function(e,t){var n=t.payload;e.annotationList=e.annotationList.filter((function(e){return e.id!==n}))},updateSavaStatus:function(e,t){var n=t.payload;e.isSave=n}}}),ye=xe.actions,ke=ye.initAnnotation,we=ye.createAnnotation,Ce=ye.deleteAnnotation,Ie=ye.updateSavaStatus,Se=xe.reducer,Ee=function(e){var t,n=e.className,a=e.type,c=void 0===a?"edit":a,i=Object(C.g)(),r=Object(C.h)(),o=Object(Q.b)(),l=Object(x.useState)(!1),s=Object(w.a)(l,2),u=s[0],d=s[1],j=Object(x.useState)(!1),b=Object(w.a)(j,2),f=b[0],h=b[1],O=Object(x.useState)(!1),v=Object(w.a)(O,2),p=v[0],m=v[1],g=Object(Q.c)((function(e){return e.annotation.annotationList})),y=M()((t={},Object(N.a)(t,"zz-header",!0),Object(N.a)(t,n,n),t)),k=Object(x.useCallback)(Object(L.a)(E.a.mark((function e(){var t;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=r.objectId,console.log("annotationList",g,t),d(!0),pe(t,{annotation:g,annotationCount:g.length||0}).then((function(e){U.b.success("\u4fdd\u5b58\u6210\u529f\uff01"),o(Ie(!1)),d(!1)})).catch((function(e){U.b.success("\u4fdd\u5b58\u5931\u8d25\uff0c\u8bf7\u68c0\u67e5\u7f51\u7edc\u8bbe\u7f6e\uff01"),d(!1)}));case 4:case"end":return e.stop()}}),e)}))),[g]);Object(x.useEffect)((function(){var e=function(e){83==e.keyCode&&window.event.ctrlKey&&(window.event.preventDefault(),k())};return window.addEventListener("keydown",e),function(){window.removeEventListener("keydown",e)}}),[k]);return Object(be.jsxs)("div",{className:y,children:[Object(be.jsxs)("div",{className:"left",children:[Object(be.jsx)("div",{className:"logo",onClick:function(){i.push({pathname:"/admin"})},children:Object(be.jsx)(B,{})}),Object(be.jsx)("div",{className:"title",children:"\u8bed\u6599\u6807\u6ce8\u4e0e\u7edf\u8ba1\u7cfb\u7edf"})]}),"edit"===c&&Object(be.jsxs)("div",{className:"right",children:[Object(be.jsx)(D.a,{loading:u,type:"outline-secondary",onClick:k,children:"\u4fdd\u5b58\u8bb0\u5f55"}),Object(be.jsx)(D.a,{style:{marginLeft:30},onClick:function(){return h(!0)},type:"outline-secondary",children:"\u7f16\u8f91\u914d\u7f6e"}),Object(be.jsx)(D.a,{style:{marginLeft:30},type:"outline-secondary",onClick:function(){return m(!0)},children:"\u7edf\u8ba1\u5206\u6790"})]}),Object(be.jsx)(Oe,{visible:f,onOk:k,onCancel:function(){h(!1)}}),Object(be.jsx)(ge,{visible:p,onCancel:function(){return m(!1)}})]})},Le=n(83),Ne=n.n(Le),Fe=(n(268),console.log.bind(console,"[annota]"),"123456789ABCDEFGHIJKLMNOPQRSTVWXYZ"),Me=function(e){var t,n=Object(C.h)(),a=e.className,c=e.highlighter,i=Object(x.useRef)(null),r=Object(Q.b)(),o=Object(x.useState)(""),l=Object(w.a)(o,2),s=l[0],u=l[1],d=Object(x.useState)([]),j=Object(w.a)(d,2),b=j[0],f=j[1],h=Object(x.useState)({}),O=Object(w.a)(h,2),v=O[0],p=O[1],m=Object(Q.c)((function(e){return e.header.categoryList})),g=Object(Q.c)((function(e){return e.annotation.annotationList})),y=Object(Q.c)((function(e){return e.annotation.isSave})),k=M()((t={},Object(N.a)(t,"zz-annotation",!0),Object(N.a)(t,a,a),t));Object(x.useEffect)((function(){var e=n.objectId;ve(e).then((function(e){var t=e.toJSON(),n=t.annotation,a="";a="SYSU"===t.source?function(e){var t=document.createElement("div");return t.innerHTML=e,t.textContent.replace(/\n/g,"").replace(/&/g,"").replace(/@/g,"").replace(/<.>/g,"").replace(/CZ|BZ|SBZ|BGFZ/g,"").replace(/<>/g,"").replace(/(\u3010(.*?)\u3011)/g,(function(e){return e[1]})).replaceAll("\u3002","\u3002</p><p>")}(t.article):t.article.replace(/\[.*?\]/g,"").replace(/\{CP(.*?)P\}/g,"$1").replace(/\{CQ(.*?)\}/g,"$1").replace(/\{.*?\}/g,"").replaceAll("\u3002","\u3002</p><p>").replaceAll("\n","").replaceAll(" ",""),u(a),r(ke(t)),n&&n.forEach((function(e){c.fromStore(e.start,e.end,e.text,e.id)}))}))}),[n,c]),Object(x.useEffect)((function(){var e=n.objectId;ve().then((function(t){var n=t.map((function(e,t){return Object(_.a)({objectId:e.id,No:t+1},e.toJSON())}));f(n);var a=n.findIndex((function(t){return t.objectId===e}));p({index:a+1,length:n.length})}),(function(){U.b.error("\u83b7\u53d6\u6587\u7ae0\u5931\u8d25")}))}),[n]),Object(x.useEffect)((function(){var e=function(e){var t=e.keyCode;if(t&&!window.event.ctrlKey){var n=String.fromCharCode(t),a=Fe.indexOf(n);if(-1!=a&&a<m.length){var c=m[a];I(c)}}};return window.addEventListener("keydown",e),function(){window.removeEventListener("keydown",e)}}),[m]),Object(x.useEffect)((function(){if(!(g.length<0)){!function(e){for(var t=e.querySelectorAll("i"),n=0;n<t.length;n++)t[n].parentElement.removeChild(t[n])}(i.current);for(var e=function(e){return m.find((function(t){return t.id===e}))},t=0;t<g.length;t++){var n=g[t],a=n.id,c=n.categoryId,r=ee(a),o=e(c);if(o){var l=o.text,s=o.color;ne(r,{text:l,color:s})}}}}),[g,m]),Object(x.useEffect)((function(){if(c){var e=c;e.on(Ne.a.event.CREATE,(function(e){e.sources.map((function(e){var t={start:e.start||e.startMeta,end:e.end||e.endMeta,text:e.text,id:e.id,categoryId:e.categoryId||window.categoryId,config:Object.assign(e.config||{},window.config)};r(we(t))}))})).on(Ne.a.event.HOVER,(function(t){var n=t.id;e.addClass("highlight-wrap-hover",n)})).on(Ne.a.event.HOVER_OUT,(function(t){var n=t.id;e.removeClass("highlight-wrap-hover",n)}))}}),[c]),Object(x.useEffect)((function(){i.current.addEventListener("click",(function(e){e.target.tagName}))}),[]),Object(x.useEffect)((function(){var e=function(e){e.preventDefault(),e.returnValue=y?"\u60a8\u7684\u6570\u636e\u5c1a\u672a\u4fdd\u5b58\uff0c\u79bb\u5f00\u540e\u4f1a\u4e22\u5931":""};return y&&window.addEventListener("beforeunload",e),function(){window.removeEventListener("beforeunload",e)}}),[y]);var I=function(e){var t=e.id,n=e.color;window.categoryId=t;var a=c,i="color-".concat(n),o=window.getSelection();a.setOption({style:{className:i}}),a.fromRange(o.getRangeAt(0)),r(Ie(!0))},S=function(e){var t=n.objectId,a=b.findIndex((function(e){return e.objectId===t}));if("pre"===e?a-=1:"next"===e&&(a+=1),a>=0&&a<b.length)if(y)U.b.error("\u6587\u7ae0\u5fd8\u8bb0\u4fdd\u5b58\u4e86\uff0c\u4fdd\u5b58\u4e00\u4e0b");else{var c=b[a],i=new URL(window.location.href);i.hash="#/edit/".concat(c.objectId),window.location.href=i.href}else U.b.error("\u5df2\u7ecf\u662f\u7b2c\u4e00\u7bc7\u6587\u7ae0\u6216\u6700\u540e\u4e00\u7bc7\u6587\u7ae0\u4e86\uff0c\u4e0d\u80fd\u518d\u8df3\u8f6c\u4e86")};return console.log("isSave",y),Object(be.jsxs)("div",{className:k,children:[Object(be.jsx)("div",{className:"action",children:m.map((function(e,t){e.color;var n=e.text;return Object(be.jsxs)(D.a,{onClick:function(){return I(e)},children:[Fe[t],"\uff1a",n]},t)}))}),Object(be.jsx)("div",{id:"iloveyryr",ref:i,className:"content",dangerouslySetInnerHTML:{__html:s}}),Object(be.jsx)(C.a,{when:y,message:"\u60a8\u7684\u5185\u5bb9\u5c1a\u672a\u4fdd\u5b58\u786e\u5b9a\u8981\u79bb\u5f00\u5417?"}),Object(be.jsxs)("div",{className:"action",children:[Object(be.jsx)(D.a,{onClick:function(){return S("pre")},children:"\u4e0a\u4e00\u7bc7"}),Object(be.jsx)(D.a,{onClick:function(){return S("next")},children:"\u4e0b\u4e00\u7bc7"}),Object(be.jsx)("span",{children:"".concat(v.index," / ").concat(v.length)})]})]})},ze=(n(269),n(289)),Te=(console.log.bind(console,"[comment]"),function(e){var t,n=e.className,a=e.highlighter,c="zz-comment",i=M()((t={},Object(N.a)(t,c,!0),Object(N.a)(t,n,n),t)),r=Object(Q.b)(),o=Object(Q.c)((function(e){return e.annotation.annotationList})),l=Object(Q.c)((function(e){return e.header.categoryList}));return Object(be.jsxs)("div",{className:i,children:[Object(be.jsx)("header",{children:"\u6211\u7684\u6807\u6ce8\u5217\u8868"}),Object(be.jsx)(ze.b,{itemLayout:"horizontal",className:"".concat(c,"-list"),dataSource:o,renderItem:function(e){var t=l.find((function(t){return t.id===e.categoryId}));return Object(be.jsxs)(ze.b.Item,{className:"".concat(c,"-list-item"),children:[t&&e&&"".concat(t.text,": ").concat(e.text),Object(be.jsx)("div",{className:"action",children:Object(be.jsx)("a",{onClick:function(){return t=e.id,void q.a.confirm({title:"\u5220\u9664",icon:Object(be.jsx)(G.a,{}),content:"\u786e\u8ba4\u5220\u9664\u5417\uff1f",okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88",onCancel:function(){console.log("\u53d6\u6d88")},onOk:function(){r(Ce(t)),r(Ie(!0)),a.remove(t)}});var t},onMouseEnter:function(){return t=e.id,void a.addClass("highlight-wrap-hover",t);var t},onMouseLeave:function(){return t=e.id,void a.removeClass("highlight-wrap-hover",t);var t},children:"delete"},"list-loadmore-edit")})]})}})]})}),Ae=(n(270),n(290)),Ve=n(291),Be=(n(271),Z.a.Option),Ue=function(e){var t=J.a.useForm(),n=Object(w.a)(t,1)[0],a=function(e,t){n.setFieldsValue(Object(N.a)({},e,t))};return Object(be.jsx)("div",{className:"yryr-form-wrap",children:Object(be.jsxs)(J.a,{className:"search-form",layout:"inline",form:n,onFinish:function(t){e.onChange&&e.onChange(t)},autoComplete:"off",children:[Object(be.jsx)(J.a.Item,{name:"title",label:"\u6587\u7ae0\u6807\u9898",children:Object(be.jsx)(K.a,{})}),Object(be.jsx)(J.a.Item,{name:"source",label:"\u8bed\u6599\u6765\u6e90",children:Object(be.jsxs)(Z.a,{onChange:a,allowClear:!0,children:[Object(be.jsx)(Be,{value:"BLCU",children:"hsk\u52a8\u6001\u4f5c\u6587\u8bed\u6599\u5e93"}),Object(be.jsx)(Be,{value:"SYSU",children:"\u4e2d\u5c71\u5927\u5b66\u6c49\u5b57\u504f\u8bef\u4e2d\u4ecb\u8bed\u8bed\u6599\u5e93"})]})}),Object(be.jsx)(J.a.Item,{name:"score",label:"\u6c49\u8bed\u6c34\u5e73",children:Object(be.jsxs)(Z.a,{onChange:a,allowClear:!0,children:[Object(be.jsx)(Be,{value:"mid",children:"\u4e2d\u7ea7"}),Object(be.jsx)(Be,{value:"high",children:"\u9ad8\u7ea7"})]})}),Object(be.jsx)(J.a.Item,{name:"nationality",label:"\u56fd\u7c4d",children:Object(be.jsxs)(Z.a,{onChange:a,allowClear:!0,children:[Object(be.jsx)(Be,{value:"korea",children:"\u97e9\u56fd"}),Object(be.jsx)(Be,{value:"britain",children:"\u82f1\u56fd"})]})}),Object(be.jsx)(J.a.Item,{children:Object(be.jsx)(D.a,{type:"primary",htmlType:"submit",children:"\u641c\u7d22"})})]})})},De={BLCU:"hsk\u52a8\u6001\u4f5c\u6587\u8bed\u6599\u5e93",SYSU:"\u4e2d\u5c71\u5927\u5b66\u6c49\u5b57\u504f\u8bef\u4e2d\u4ecb\u8bed\u8bed\u6599\u5e93",mid:"\u4e2d\u7ea7",high:"\u9ad8\u7ea7",korea:"\u97e9\u56fd",britain:"\u82f1\u56fd"},Ze=function(e){var t=e.loading,n=e.dataSource,a=e.onUpdate,c=Object(x.useState)(n||[]),i=Object(w.a)(c,2),r=i[0],o=i[1],l=Object(C.g)(),s=[{title:"No.",dataIndex:"No",key:"No"},{title:"\u6807\u9898",dataIndex:"title",key:"title"},{title:"\u8bed\u6599\u6765\u6e90",dataIndex:"source",key:"source",render:function(e){return De[e]||e}},{title:"\u56fd\u7c4d",dataIndex:"nationality",key:"nationality",render:function(e){return De[e]||e}},{title:"\u6c49\u8bed\u6c34\u5e73",dataIndex:"score",key:"score",render:function(e){return De[e]||e}},{title:"\u6807\u6ce8\u6570\u91cf",dataIndex:"annotationCount",key:"annotationCount"},{title:"Action",key:"action",render:function(e,t){return Object(be.jsxs)(Ae.b,{size:"middle",children:[Object(be.jsx)("a",{onClick:function(){return u(t.objectId)},type:"primary",children:"\u6807\u6ce8"}),Object(be.jsx)("a",{onClick:function(){return j(t.objectId)},children:"\u7f16\u8f91"}),Object(be.jsx)(Ve.a,{title:"\u5220\u9664\u540e\u65e0\u6cd5\u6062\u590d\uff0c\u8bf7\u8c28\u614e\u64cd\u4f5c",onConfirm:function(){return d(t.objectId)},children:Object(be.jsx)("a",{type:"primary",danger:!0,children:"\u5220\u9664"})})]})}}];Object(x.useEffect)((function(){o(n)}),[n]);var u=function(e){l.push({pathname:"/edit/".concat(e)})},d=function(e){var t;console.log("\u5220\u9664\u529f\u80fd",e),(t=e,de.a.Object.createWithoutData("Article",t).destroy()).then((function(){U.b.success("\u5220\u9664\u6210\u529f"),a&&a()})).catch((function(){U.b.success("\u5220\u9664\u5931\u8d25")}))},j=function(t){e.onUpdate&&e.onUpdate(t)};return Object(be.jsxs)("div",{children:[Object(be.jsx)(Ue,{onChange:function(e){console.log("\u8c03\u7528",e);var t=n.filter((function(t){var n=!0;return Object.keys(e).forEach((function(a){e[a]&&e[a]!==t[a]&&(n=!1)})),n}));console.log("\u8c03\u7528",t),o(t)}}),Object(be.jsx)(me.a,{loading:t,bordered:!0,columns:s,dataSource:r,pagination:{showTotal:function(e){return"\u5f53\u524d\u5171\u6709".concat(e,"\u6761\u6570\u636e")}}})]})},qe=n(152),Je=n(284),Re=n(71),He=Z.a.Option,Ke=K.a.TextArea,Ge={labelCol:{span:4},wrapperCol:{span:20}},Pe=function(e){var t=e.visible,n=e.articleId,a=e.onOk,c=e.onFail,i=J.a.useForm(),r=Object(w.a)(i,1)[0];Object(x.useEffect)((function(){t&&n&&ve(n).then((function(e){var t=e.toJSON();console.log("articleObj",t),r.setFieldsValue(Object(_.a)({},t))}))}),[t,n]);var o=function(e,t){r.setFieldsValue(Object(N.a)({},e,t))},l=function(){e.onCancel&&e.onCancel()};return Object(be.jsx)(q.a,{title:n?"\u7f16\u8f91\u6587\u7ae0":"\u6dfb\u52a0\u6587\u7ae0",visible:t,onOk:function(){r.submit(),e.onOk&&e.onOk()},onCancel:l,okText:n?"\u786e\u5b9a":"\u6dfb\u52a0",cancelText:"\u53d6\u6d88",children:Object(be.jsxs)(J.a,Object(_.a)(Object(_.a)({},Ge),{},{labelAlign:"right",form:r,name:"dynamic_form_nest_item",onFinish:function(e){n?pe(n,e).then((function(e){U.b.success("\u4fee\u6539\u6210\u529f"),a&&a()}),(function(e){U.b.error("\u4fee\u6539\u5931\u8d25"),c&&c()})):function(e){var t=new(de.a.Object.extend("Article"));return Object.keys(e).forEach((function(n){t.set(n,e[n])})),t.save()}(e).then((function(e){l(),U.b.success("\u6dfb\u52a0\u6210\u529f"),a&&a()}),(function(e){U.b.error("\u6dfb\u52a0\u5931\u8d25"),c&&c()})),console.log("values",e)},autoComplete:"off",children:[Object(be.jsx)(J.a.Item,{name:"title",label:"\u6587\u7ae0\u6807\u9898",rules:[{required:!0}],children:Object(be.jsx)(K.a,{})}),Object(be.jsx)(J.a.Item,{name:"source",label:"\u8bed\u6599\u6765\u6e90",rules:[{required:!0}],children:Object(be.jsxs)(Z.a,{onChange:o,allowClear:!0,children:[Object(be.jsx)(He,{value:"BLCU",children:"hsk\u52a8\u6001\u4f5c\u6587\u8bed\u6599\u5e93"}),Object(be.jsx)(He,{value:"SYSU",children:"\u4e2d\u5c71\u5927\u5b66\u6c49\u5b57\u504f\u8bef\u4e2d\u4ecb\u8bed\u8bed\u6599\u5e93"})]})}),Object(be.jsx)(J.a.Item,{name:"score",label:"\u6c49\u8bed\u6c34\u5e73",rules:[{required:!0}],children:Object(be.jsxs)(Z.a,{onChange:o,allowClear:!0,children:[Object(be.jsx)(He,{value:"mid",children:"\u4e2d\u7ea7"}),Object(be.jsx)(He,{value:"high",children:"\u9ad8\u7ea7"})]})}),Object(be.jsx)(J.a.Item,{name:"nationality",label:"\u56fd\u7c4d",rules:[{required:!0}],children:Object(be.jsxs)(Z.a,{onChange:o,allowClear:!0,children:[Object(be.jsx)(He,{value:"korea",children:"\u97e9\u56fd"}),Object(be.jsx)(He,{value:"britain",children:"\u82f1\u56fd"})]})}),Object(be.jsx)(J.a.Item,{name:"article",label:Object(be.jsx)(Re.a,{title:"\u53ef\u4ee5\u586b\u5165\u5df2\u6807\u6ce8\u7684\u5185\u5bb9",children:Object(be.jsx)("span",{children:"\u6587\u7ae0\u5185\u5bb9"})}),rules:[{required:!0}],children:Object(be.jsx)(Ke,{rows:5})})]}))})},We=(n(275),function(e){var t=e.visible,n=e.count,a=(e.onOk,e.onCancel);Object(Q.c)((function(e){return e.annotation.config}));return Object(be.jsx)(q.a,{title:"\u7edf\u8ba1\u5206\u6790",okText:"\u786e\u5b9a",cancelText:"\u53d6\u6d88",visible:t,onOk:function(){a&&a()},width:800,onCancel:function(){console.log("\uff1f\uff1f\uff1f\u8c03\u7528\u4e00\u4e0b\u554a"),a&&a()},children:Object(be.jsxs)("div",{children:["\u5b57\u6570\u7edf\u8ba1\uff1a",n,"\u5b57"]})})}),Qe=function(){var e=Object(x.useState)(!1),t=Object(w.a)(e,2),n=t[0],a=t[1],c=Object(x.useState)(!1),i=Object(w.a)(c,2),r=i[0],o=i[1],l=Object(x.useState)(!1),s=Object(w.a)(l,2),u=s[0],d=s[1],j=Object(x.useState)([]),b=Object(w.a)(j,2),f=b[0],h=b[1],O=Object(x.useState)([]),v=Object(w.a)(O,2),p=v[0],m=v[1],g=Object(x.useState)([]),y=Object(w.a)(g,2),k=y[0],C=y[1],I=Object(x.useState)([]),S=Object(w.a)(I,2),E=S[0],L=S[1],N=Object(x.useState)(""),F=Object(w.a)(N,2),M=F[0],z=F[1],T=Object(x.useState)(0),A=Object(w.a)(T,2),V=A[0],B=A[1],Z=Object(x.useCallback)((function(){var e=0;d(!0),ve().then((function(t){var n=t.map((function(e,t){return Object(_.a)({objectId:e.id,No:t+1},e.toJSON())}));n.forEach((function(t){e+=t.article.length})),B(e),h(n),d(!1)}),(function(){d(!1),U.b.error("\u83b7\u53d6\u6587\u7ae0\u5931\u8d25")}))}),[]),q=Object(x.useCallback)((function(){je("610291721de21d3e072c5432").then((function(e){var t=e.get("categoryList");m(t)}))}),[]);Object(x.useEffect)((function(){Z(),q()}),[Z,q]),Object(x.useEffect)((function(){if(p.length>0&&f.length>0){var e=function(){var e=f.map((function(e){var t={},n=0;e.annotation&&e.annotation.length>0&&(e.annotation.forEach((function(e){var n=p.find((function(t){return t.id===e.categoryId}));t[n.text]?t[n.text]+=1:t[n.text]=1})),n=e.annotation.length);var a=function(e){var t=document.createElement("div");return t.innerHTML=e,t.textContent.replace(/\n/g,"").replace(/&/g,"").replace(/@/g,"").replace(/<.>/g,"").replace(/CZ|BZ|SBZ|BGFZ/g,"").replace(/<>/g,"").replace(/(\u3010(.*?)\u3011)/g,(function(e){return e[1]}))}(e.article);return Object(_.a)({No:e.No,title:e.title,nationality:e.nationality,score:e.score,source:e.source,count:n,words:a.length},t)}));return e}(),t=function(){var e=f.map((function(e){var t={},n=0;return e.annotation&&e.annotation.length>0&&(e.annotation.forEach((function(e){var n=p.find((function(t){return t.id===e.categoryId}));if(t[n.text]){var a=t[n.text].length+1,c="".concat(a,".").concat(e.text);t[n.text].push(c)}else t[n.text]=["1.".concat(e.text)]})),n=e.annotation.length),Object.keys(t).forEach((function(e){return t[e]=t[e].join("\n")})),Object(_.a)({No:e.No,title:e.title,nationality:e.nationality,score:e.score,source:e.source,count:n},t)}));return e}();C(e),L(t)}}),[p,f]);return Object(be.jsxs)("div",{className:"yryr-admin",children:[Object(be.jsx)(Ee,{type:"admin"}),Object(be.jsxs)("div",{className:"main",children:[Object(be.jsxs)("div",{className:"action",children:[Object(be.jsx)(D.a,{type:"secondary",onClick:function(){a(!0),z("")},children:"\u4e0a\u4f20\u6587\u7ae0"}),Object(be.jsx)(Je.a,{type:"vertical"}),Object(be.jsx)(D.a,{type:"secondary",onClick:function(){return o(!0)},children:"\u6574\u4f53\u7edf\u8ba1"}),Object(be.jsx)(Je.a,{type:"vertical"}),Object(be.jsx)(D.a,{type:"primary",children:Object(be.jsx)(qe.CSVLink,{filename:"anaphoric-data.csv",data:k,children:"\u5bfc\u51fa\u6570\u636e"})}),Object(be.jsx)(Je.a,{type:"vertical"}),Object(be.jsx)(D.a,{type:"primary",children:Object(be.jsx)(qe.CSVLink,{filename:"anaphoric-data-text.csv",data:E,children:"\u5bfc\u51fa\u6587\u672c"})})]}),Object(be.jsx)(Ze,{dataSource:f,loading:u,onUpdate:function(e){a(!0),z(e)}})]}),Object(be.jsx)(Pe,{articleId:M,visible:n,onOk:function(){a(!1),Z()},onCancel:function(){a(!1)}},Date.now()),Object(be.jsx)(We,{visible:r,count:V,onCancel:function(){return o(!1)}})]})},_e=(n(276),n(49)),Ye=n(78),Xe=n(95),$e=n(134),et=(n(167),function e(t){Object(Ye.a)(this,e),this.id=t,this.sku=new Set}),tt=console.log.bind(console,"[adj-list]"),nt=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];Object(Ye.a)(this,e),this.vertices=[],this.adjList=new Map,this.isDirected=t}return Object(Xe.a)(e,[{key:"loadDataSource",value:function(e,t){var n=this;e.reduce((function(e,t){return e.concat(t.list)}),[]).forEach((function(e){var t=new et(e);n.addVertex(t)}));for(var a=0;a<e.length;a++)for(var c=e[a].list,i=0;i<c.length;i++)for(var r=0;r<c.length;r++)c[i]!==c[r]&&this.addEdge(c[i],c[r],parseInt(100*Math.random()));for(var o=0;o<t.length;o++)for(var l=t[o].list,s=t[o].skuId,u=0;u<l.length;u++)for(var d=0;d<l.length;d++)l[u]!==l[d]&&this.addEdge(l[u],l[d],s)}},{key:"getVertexById",value:function(e){return this.vertices.find((function(t){return t.id===e}))}},{key:"hasVertex",value:function(e){return this.vertices.includes(e)}},{key:"hasEdge",value:function(e,t){return this.adjList.get(e).includes(t)}},{key:"addVertex",value:function(e){this.hasVertex(e)||(this.vertices.push(e),this.adjList.set(e,[]))}},{key:"addEdge",value:function(e,t,n){var a=this.getVertexById(e),c=this.getVertexById(t);a&&c?this.hasEdge(a,c)||(a.sku.add(n),c.sku.add(n),this.adjList.get(a).push(c),this.adjList.get(c).push(a)):console.log("v, w\u8282\u70b9\u4e0d\u5b58\u5728, \u8bf7\u5148\u6dfb\u52a0\u5165\u8282\u70b9\u4e2d")}},{key:"getVertices",value:function(){return this.vertices}},{key:"getExistVertices",value:function(){return this.existVertices}},{key:"getVertexIdList",value:function(e){if(e){var t=this.getVertexById(e);return this.adjList.get(t).map((function(e){return e.id}))}return this.vertices.map((function(e){return e.id}))}},{key:"getAdjList",value:function(){return this.adjList}},{key:"vertexToString",value:function(e){return"[".concat(e.id,", ").concat(Object(_e.a)(e.sku),"] ")}},{key:"toString",value:function(){for(var e="",t=0;t<this.vertices.length;t++){var n=this.vertices[t];e+="".concat(this.vertexToString(n)," -> ");for(var a=this.adjList.get(this.vertices[t]),c=0;c<a.length;c++)e+="".concat(this.vertexToString(a[c])," ");e+="\n"}return e}},{key:"find",value:function(e,t){return this.adjList.get(e).includes(t)}},{key:"getSkuIntersection",value:function(e){for(var t=new Map,n=0;n<e.length;n++){Object(_e.a)(e[n]).forEach((function(e){t.has(e)?t.set(e,2):t.set(e,1)}))}return Object(_e.a)(t).filter((function(e){var t=Object(w.a)(e,2);t[0];return t[1]>1})).map((function(e){var t=Object(w.a)(e,2),n=t[0];t[1];return n}))}},{key:"getIntersection",value:function(e){if(window.adj=[0,0],e.length<=0)return this.getVertexIdList();if(1===e.length)return this.getVertexIdList(e[0]);for(var t=new Map,n=[],a=0;a<e.length;a++){var c=e[a],i=this.getVertexById(c);n.push(i.sku);var r=this.adjList.get(i);tt("adj",r),window.adj[a]=r;for(var o=0;o<r.length;o++){var l=r[o];t.has(l)?t.set(l,2):t.set(l,1)}}tt("[...map]",Object(_e.a)(t),Object(_e.a)(t).filter((function(e){var t=Object(w.a)(e,2);t[0];return t[1]>1})).map((function(e){var t=Object(w.a)(e,2),n=t[0];t[1];return n})));var s=this.getSkuIntersection(n),u=Object(_e.a)(t).filter((function(e){var t=Object(w.a)(e,2);t[0];return t[1]>1})).filter((function(e){var t=Object(w.a)(e,2),n=t[0],a=(t[1],n.sku),c=s.every((function(e){return a.has(e)}));return c})).map((function(e){var t=Object(w.a)(e,2),n=t[0];t[1];return n.id}));return u}}]),e}(),at=[{skuId:1,list:["\u610f\u5916\u9669","\u5341\u5e74","0\u5c81\u523018\u5c81"]},{skuId:2,list:["\u610f\u5916\u9669","\u4e00\u767e\u5e74","0\u5c81\u523018\u5c81"]},{skuId:3,list:["\u8f66\u9669","\u5341\u5e74","0\u5c81\u523018\u5c81"]},{skuId:4,list:["\u8f66\u9669","\u5341\u5e74","19\u5c81\u523060\u5c81"]},{skuId:5,list:["\u5065\u5eb7\u9669","\u4e00\u5343\u5e74","61\u5c81\u5230100\u5c81"]},{skuId:6,list:["\u5065\u5eb7\u9669","\u4e00\u5343\u5e74","0\u5c81\u523018\u5c81"]},{skuId:7,list:["\u5065\u5eb7\u9669","\u5341\u5e74","19\u5c81\u523060\u5c81"]}],ct=[{title:"\u4fdd\u9669\u79cd\u7c7b",key:"type",list:["\u610f\u5916\u9669","\u8f66\u9669","\u5065\u5eb7\u9669"]},{title:"\u4fdd\u969c\u65f6\u95f4",key:"time",list:["\u5341\u5e74","\u4e00\u767e\u5e74","\u4e00\u5343\u5e74"]},{title:"\u6295\u4fdd\u4eba\u5e74\u9f84",key:"age",list:["0\u5c81\u523018\u5c81","19\u5c81\u523060\u5c81","61\u5c81\u5230100\u5c81"]}];(new nt).loadDataSource(ct,at);var it=function(){return Object(be.jsx)("div",{})},rt=n(292),ot=function e(t){var n=parseInt(Math.random()*Math.pow(10,t));return 0!==n?n:e(t)},lt=function(e,t){var n=e;for(n>100&&(n/=10);n<Math.pow(10,t-1);)n*=10;return Math.round(n)},st=(n(277),function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=[],n=0;n<10;n++){var a=ot(3),c=ot(3),i={};1===e?i={answer:a/c,formatAnswer:lt(a/c,2)}:(2===e||3===e)&&(i={answer:a+c,formatAnswer:a+c});var r=Object(_.a)({a:a,b:c,input:"",time:""},i);t.push(r)}return t}),ut=[{type:"span",label:"a",span:5},{type:"span",label:"b",span:5},{type:"input",label:"a/b",span:6},{type:"alert",label:"answer",span:4},{type:"span",label:"time",span:4}],dt=function(){var e=Object(x.useState)(ut),t=Object(w.a)(e,2),n=t[0],a=t[1],c=Object(x.useState)(1),i=Object(w.a)(c,2),r=i[0],o=i[1],l=Object(x.useState)(!1),s=Object(w.a)(l,2),u=s[0],d=s[1],j=Object(x.useState)(0),b=Object(w.a)(j,2),f=b[0],h=b[1],O=Object(x.useState)((function(){return st()})),v=Object(w.a)(O,2),p=v[0],m=v[1];window.data=p;var g=Object(x.useState)({start:"",end:""}),y=Object(w.a)(g,2),k=y[0],C=y[1],I="calc-wrap";return Object(be.jsxs)("div",{className:I,children:[Object(be.jsx)("div",{className:"".concat(I,"-method"),children:Object(be.jsxs)($e.a.Group,{onChange:function(e){var t=e.target.value,c="";"1"==t?c="a/b":"2"==t?c="a+b":"3"==t&&(c="a-b");var i=n.map((function(e){return"input"===e.type?Object(_.a)(Object(_.a)({},e),{},{label:c}):e}));a(i);var r=st(t);console.log("newData",r),m(r),o(t),d(!1)},value:r,children:[Object(be.jsx)($e.a,{value:1,children:"\u9664\u6cd5"}),Object(be.jsx)($e.a,{value:2,children:"\u52a0\u6cd5"}),Object(be.jsx)($e.a,{value:3,children:"\u51cf\u6cd5"})]})}),Object(be.jsx)("div",{className:"".concat(I,"-content"),children:Object(be.jsxs)("div",{className:"list",children:[Object(be.jsx)(R.a,{className:"list-item",children:n.map((function(e,t){return Object(be.jsx)(H.a,{className:"list-item-num",span:e.span,children:e.label},t)}))}),p.map((function(e,t){var n=e.a,a=e.b,c=e.input,i=e.formatAnswer,r=e.time-k.start;if(t>1){var o=p[t-1];r=e.time-o.time}return Object(be.jsxs)(R.a,{className:"list-item",children:[Object(be.jsx)(H.a,{span:5,className:"list-item-num list-item-a",children:n}),Object(be.jsx)(H.a,{span:5,className:"list-item-num list-item-b",children:a}),Object(be.jsx)(H.a,{span:6,className:"list-item-num list-item-b",children:Object(be.jsx)(K.a,{type:"tel",onClick:function(){return function(e){0===e&&(console.log("start!!!"),C(Object(_.a)(Object(_.a)({},k),{},{start:Date.now()})))}(t)},onChange:function(e){return function(e,t){var n=p.map((function(n,a){return t===a?Object(_.a)(Object(_.a)({},n),{},{input:e.target.value}):n}));m(n)}(e,t)},onBlur:function(){return function(e){var t=p.map((function(t,n){return e===n?Object(_.a)(Object(_.a)({},t),{},{time:Date.now()}):t}));m(t)}(t)},value:c})}),u&&Object(be.jsx)(H.a,{span:4,className:"list-item-num list-item-c",children:Object(be.jsx)(rt.a,{message:i,type:Math.abs(c-i)<=1?"success":"error",showIcon:!0})}),u&&Object(be.jsx)(H.a,{span:4,className:"list-item-num list-item-c",children:parseInt(r/1e3)})]},t)})),Object(be.jsx)(D.a,{onClick:function(){d(!0);var e=0;p.forEach((function(t){var n=t.input,a=t.formatAnswer;Math.abs(n-a)<=1&&e++})),h(e),C(Object(_.a)(Object(_.a)({},k),{},{end:parseInt((Date.now()-k.start)/1e3)}))},children:"\u9a8c\u8bc1\u7ed3\u679c"}),Object(be.jsxs)("div",{children:["\u901a\u8fc7: ",f,"/10"]}),Object(be.jsxs)("div",{children:["\u7528\u65f6: ",k.end,"s"]})]})})]})},jt=(n(278),function(){return Object(x.useEffect)((function(){function e(){var e=document.getElementsByTagName("html")[0],t=document.documentElement.clientWidth,n=(t=t>1080?1080:t)/100;e.style.fontSize=n+"px"}e(),window.addEventListener("resize",e,!1);var t=document.querySelector(".box"),n=document.querySelector(".width"),a=document.querySelector(".height"),c=t.getBoundingClientRect(),i=c.width,r=c.height;n.innerHTML="\u5bbd\uff1a".concat(i),a.innerHTML="\u9ad8\uff1a".concat(r)}),[]),Object(be.jsxs)("div",{className:"wrap",children:[Object(be.jsx)("div",{className:"box"}),Object(be.jsx)("div",{className:"width",children:"\u5bbd\uff1a"}),Object(be.jsx)("div",{className:"height",children:"\u9ad8\uff1a"})]})}),bt=function(){var e=Object(C.h)(),t=Object(x.useState)(new Ne.a({exceptSelectors:[".ant-list-item"]})),n=Object(w.a)(t,2),a=n[0],c=n[1];return Object(x.useEffect)((function(){var e=new Ne.a({exceptSelectors:[".ant-list-item"]});return c(e),function(){e.dispose()}}),[e]),Object(be.jsxs)("div",{className:"yryr-home",children:[Object(be.jsx)(Ee,{}),Object(be.jsxs)("div",{className:"main",children:[Object(be.jsx)(Me,{highlighter:a},a),Object(be.jsx)(Te,{highlighter:a},a)]})]})},ft=function(){return Object(be.jsx)(I.a,{children:Object(be.jsxs)(C.d,{children:[Object(be.jsx)(C.b,{exact:!0,path:"/",component:Qe}),Object(be.jsx)(C.b,{exact:!0,path:"/admin",component:Qe}),Object(be.jsx)(C.b,{exact:!0,path:"/edit/:objectId",component:bt}),Object(be.jsx)(C.b,{exact:!0,path:"/algorithm",component:it}),Object(be.jsx)(C.b,{exact:!0,path:"/calc",component:dt}),Object(be.jsx)(C.b,{exact:!0,path:"/test",component:jt})]})})},ht=(n(279),Object(Y.a)({reducer:{annotation:Se,header:se}}));k.a.render(Object(be.jsx)(Q.a,{store:ht,children:Object(be.jsx)(ft,{})}),document.getElementById("root"))}},[[280,1,2]]]);
//# sourceMappingURL=main.c0752954.chunk.js.map